{"version":3,"sources":["webpack:///./src/components/PicCircle.vue","webpack:///./src/components/PicCircle.vue?cdb3","webpack:///./node_modules/spark-md5/spark-md5.js","webpack:///./src/components/uploadImg.vue?0ee0","webpack:///./src/components/uploadImg.vue","webpack:///./node_modules/qiniu-js/esm/errors/index.js","webpack:///./node_modules/qiniu-js/esm/utils/pool.js","webpack:///./node_modules/qiniu-js/esm/utils/observable.js","webpack:///./node_modules/qiniu-js/esm/utils/base64.js","webpack:///./node_modules/qiniu-js/esm/config/region.js","webpack:///./node_modules/qiniu-js/esm/utils/helper.js","webpack:///./node_modules/qiniu-js/esm/api/index.js","webpack:///./node_modules/qiniu-js/esm/upload/base.js","webpack:///./node_modules/qiniu-js/esm/upload/resume.js","webpack:///./node_modules/qiniu-js/esm/utils/crc32.js","webpack:///./node_modules/qiniu-js/esm/upload/direct.js","webpack:///./node_modules/qiniu-js/esm/logger/report-v3.js","webpack:///./node_modules/qiniu-js/esm/logger/index.js","webpack:///./node_modules/qiniu-js/esm/upload/hosts.js","webpack:///./node_modules/qiniu-js/esm/upload/index.js","webpack:///./node_modules/qiniu-js/esm/utils/config.js","webpack:///./node_modules/qiniu-js/esm/utils/compress.js","webpack:///./src/components/uploadImg.vue?33c8","webpack:///./node_modules/querystring-es3/decode.js","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/querystring-es3/index.js","webpack:///./src/components/PicCircle.vue?b73e","webpack:///./node_modules/querystring-es3/encode.js"],"names":["class","back","name","size","autoplay","indicator-color","prominantImgList","item","index","key","fit","src","rel","select","refreshing","onRefresh","loading","finished","finished-text","onLoad","imgList","lazy-load","showImg","sm_src","itemList","pid","isShow","show-index","start-position","show","images","onChange","before-close","closeImg","cover","down","data","cid","currentPage","created","this","$store","state","toucherShow","destroyed","methods","lis","document","getElementsByClassName","classList","remove","add","con1","con2","style","display","window","scrollTo","top","behavior","history","$route","query","a","get","then","res","length","i","push","setInterval","value","category","console","log","newIndex","currentImg","split","slice","downloadIamge","moveFile","fileEntry","dstEntry","moveTo","entry","plus","fullPath","e","alert","message","imgsrc","dtask","downloader","createDownload","method","filename","d","status","fileSaveUrl","io","convertLocalFileSystemURL","gallery","save","start","__exports__","render","factory","module","exports","undefined","hex_chr","md5cycle","x","k","b","c","md5blk","s","md5blks","charCodeAt","md5blk_array","md51","tail","tmp","lo","hi","n","substring","toString","match","parseInt","md51_array","subarray","Uint8Array","rhex","j","hex","join","toUtf8","str","test","unescape","encodeURIComponent","utf8Str2ArrayBuffer","returnUInt8Array","buff","ArrayBuffer","arr","arrayBuffer2Utf8Str","String","fromCharCode","apply","concatenateArrayBuffers","first","second","result","byteLength","set","buffer","hexToBinaryString","bytes","substr","SparkMD5","reset","y","lsw","msw","prototype","clamp","val","Math","max","min","from","to","num","target","targetArray","sourceArray","begin","end","append","appendBinary","contents","_buff","_length","_hash","raw","ret","_finish","getState","hash","setState","destroy","hashBinary","content","call","fileList","multiple","max-count","max-size","onOversize","tags","tags_flag","addTag","showPopup","upload","close","round","position","ref","current_item","QiniuErrorName","__extends","extendStatics","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","create","QiniuError","stack","Error","QiniuRequestError","_super","code","reqId","_this","RequestError","isRequestError","QiniuNetworkError","Pool","runTask","limit","queue","processing","enqueue","task","Promise","resolve","reject","check","run","filter","v","err","processingNum","availableNum","forEach","__assign","assign","t","arguments","Subscription","closed","unsubscribe","_unsubscribe","teardown","Subscriber","observerOrNext","error","complete","isStopped","destination","next","Observable","_subscribe","subscribe","sink","utf8Encode","argString","string","utftext","stringl","c1","enc","RangeError","c2","utf8Decode","strData","tmpArr","seqlen","ai","base64Encode","o1","o2","o3","h1","h2","h3","h4","bits","b64","ac","tmp_arr","charAt","base64Decode","dec","indexOf","urlSafeBase64Encode","replace","urlSafeBase64Decode","__awaiter","thisArg","_arguments","P","generator","adopt","fulfilled","step","rejected","done","__generator","body","f","g","_","label","sent","trys","ops","verb","Symbol","iterator","op","TypeError","pop","MB","pow","getChunks","file","blockSize","chunkByteSize","chunks","count","ceil","chunk","isMetaDataValid","params","keys","every","isCustomVarsValid","sum","list","reduce","loaded","setLocalFileInfo","localKey","info","logger","localStorage","setItem","JSON","stringify","warn","WriteCacheFailed","createLocalKey","removeLocalFileInfo","removeItem","RemoveCacheFailed","getLocalFileInfo","localInfoString","getItem","_a","ReadCacheFailed","localInfo","parse","_b","InvalidCacheData","getAuthHeaders","token","auth","Authorization","getHeadersForChunkUpload","header","getHeadersForMkFile","createXHR","XMLHttpRequest","ActiveXObject","NotAvailableXMLHttpRequest","computeMd5","spark","readAsArrayBuffer","reader","FileReader","onload","evt","InvalidProgressEventTarget","onerror","FileReaderReadFailed","request","url","options","xhr","open","onCreate","headers","headers_1","setRequestHeader","addEventListener","lengthComputable","onProgress","total","onreadystatechange","responseText","readyState","getResponseHeader","send","getPortFromUrl","groups","type","getDomainFromUrl","getPutPolicy","InvalidToken","segments","assessKey","putPolicy","scope","bucketName","createObjectURL","URL","webkitURL","mozURL","region","z0","z1","z2","na0","as0","cnEast2","regionUphostMap","srcUphost","cdnUphost","getUpHosts","accessKey","protocol","ak","bucket","getBaseUrl","uploadInfo","id","initUploadParts","uploadUrl","uploadChunk","md5","uploadComplete","direct","__read","o","m","r","ar","__spread","concat","DEFAULT_CHUNK_SIZE","FREEZE_CODE_LIST","RETRY_CODE_LIST","GB","Base","handlers","hostPool","aborted","retryCount","xhrList","config","putExtra","fname","onData","onError","onComplete","checkAndUpdateUploadHost","newHost","getUp","upprotocol","NotAvailableUploadHost","uploadHost","host","checkAndUnfreezeHost","isFrozen","unfreeze","checkAndFreezeHost","includes","freeze","handleError","putFile","err_1","notReachRetryCount","needRetry","InvalidFile","customVars","InvalidCustomVars","metadata","InvalidMetadata","uploadAt","Date","getTime","sendLog","clear","abort","stop","addXhr","report","remoteIp","upType","time","floor","port","getUrl","bytesSent","progress","duration","getProgressInfoItem","fromCache","percent","isPositiveInteger","re","Resume","pool","mkFileResponse","uploadChunks","error_1","chunkSize","InvalidChunkSize","initBeforeUploadChunks","chunkInfo","concurrentRequestLimit","getLocalKey","map","all","mkFileReq","cachedInfo","shouldCheckMD5","reuseSaved","requestOptions","response","cachedUploadedList","checkByMD5","usedCacheList","updateChunkProgress","uploadedList","updateLocalCache","checkByServer","getUploadInfo","etag","parts","partNumber","mimeType","updateMkFileProgress","infoMessage","uploadId","mkFileProgress","notifyResumeProgress","CRC32","crc","table","makeTable","offset","compute","readAsUint8Array","arrayBuffer","bind","chuck","Direct","formData","crcSign","customVars_1","FormData","updateDirectProgress","finishDirectProgress","reportV3","retry","stringifyData","Logger","disableReport","level","prefix","getPrintPrefix","args","_i","allowLevel","unfreezeTimeMap","Map","Host","currentTime","unfreezeTime","getUnfreezeTime","HostPool","initHosts","cachedHostsMap","register","hosts","refresh","_c","_d","cachedHostList","stashHosts","_e","up","acc","main","backup","availableHostList","priorityQueue","sort","hostA","hostB","createUploadManager","forceDirect","disableStatisticsReport","debugLogLevel","normalizeUploadConfig","uphost","observer","manager","__rest","getOwnPropertySymbols","propertyIsEnumerable","otherConfig","normalizeConfig","useCdnDomain","hostList","isArray","hostMap","Boolean","PNG","JPEG","WEBP","BMP","maxSteps","scaleFactor","supportMimeTypes","defaultType","isSupportedType","Compress","quality","noCompressIfLarger","process","srcDimension","originImage","canvas","scale","scaleCanvas","distBlob","outputType","UnsupportedFileType","getOriginImage","getCanvas","maxWidth","width","maxHeight","height","doScale","toBlob","dist","ctx","fillStyle","fillRect","clearRect","img","Image","createElement","context","getContext","drawImage","GetCanvasContextFailed","source","sctx","steps","factor","mirror","mctx","originWidth","originHeight","dw","dh","getImageData","putImageData","dataURL","toDataURL","atob","char","blob","Blob","compressImage","compress","currentTag","control","current_file","fileName","uid","arr_index","splice","afterRead","$router","len","dataType","contentType","putExtra1","putExtra2","observable","obj","prop","qs","sep","eq","regexp","maxKeys","kstr","vstr","idx","decodeURIComponent","xs","_defineProperty","defineProperty","enumerable","configurable","writable","decode","encode","stringifyPrimitive","isFinite","objectKeys","ks"],"mappings":"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","file":"static/js/uploadGroup.2880f99e.js","sourcesContent":["<template>\r\n\t<div class=\"content\">\r\n\t\t<div class=\"topMenu_title\">\r\n\t\t\t<van-icon @click=\"back\" name=\"arrow-left\" size=\"25\" class=\"ret\"/>\r\n\t\t\t<h4 class=\"title\">好图推荐</h4>\r\n\t\t</div>\r\n\t\t<div class=\"swiper\">\r\n\t\t\t<van-swipe class=\"my-swipe\" :autoplay=\"3000\" indicator-color=\"white\">\r\n\t\t\t  <van-swipe-item class=\"swipe-item\" v-for=\"(item,index) in prominantImgList\" :key=\"index\">\r\n\t\t\t\t  <van-image\r\n\t\t\t\t\tclass=\"swipe-img\"\r\n\t\t\t\t    fit=\"scale-down\"\r\n\t\t\t\t    :src=\"item\" \r\n\t\t\t\t\trel=\"external nofollow\"/>\r\n\t\t\t  </van-swipe-item>\r\n\t\t\t</van-swipe>\r\n\t\t</div>\r\n\t\t<div class=\"topMenu\">\r\n\t\t\t<div class=\"topMenu-item selected\" @click=\"select(0)\">热度倒序</div>\r\n\t\t\t<div class=\"topMenu-item\" @click=\"select(1)\">时间倒序</div>\r\n\t\t</div>\r\n\t\t<div class=\"con_1\">\r\n\t\t\t<van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\">\r\n\t\t\t\t<van-list\r\n\t\t\t\tclass=\"list\"\r\n\t\t\t\t  v-model:loading=\"loading\"\r\n\t\t\t\t  :finished=\"finished\"\r\n\t\t\t\t  finished-text=\"没有更多了\"\r\n\t\t\t\t  @load=\"onLoad\">\r\n\t\t\t\t  <div class=\"img_cell\" v-for=\"(item,index) in imgList\" :key=\"index\" >\r\n\t\t\t\t\t  <div class=\"item_top\">\r\n\t\t\t\t\t\t  <div class=\"username\">sazkuyo</div>\r\n\t\t\t\t\t\t  <div class=\"date_title\">2021-12-19</div>\r\n\t\t\t\t\t  </div>\r\n\t\t\t\t\t  <van-image\r\n\t\t\t\t\t  \t\tclass=\"img_show\"\r\n\t\t\t\t\t  \t\tfit=\"scale-down\"\r\n\t\t\t\t\t  \t\tlazy-load\r\n\t\t\t\t\t  \t\t@click=\"showImg(index)\"\r\n\t\t\t\t\t  \t\t:src=\"item.sm_src\"/>\r\n\t\t\t\t\t\t\t<div class=\"item_msg\"></div>\r\n\t\t\t\t  </div>\r\n\t\t\t\t</van-list>\r\n\t\t\t</van-pull-refresh>\r\n\t\t</div>\r\n\t\t<div class=\"con_2\">\r\n\t\t\t<van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\">\r\n\t\t\t\t<van-list\r\n\t\t\t\tclass=\"list\"\r\n\t\t\t\t  v-model:loading=\"loading\"\r\n\t\t\t\t  :finished=\"finished\"\r\n\t\t\t\t  finished-text=\"没有更多了\"\r\n\t\t\t\t  @load=\"onLoad\">\r\n\t\t\t\t  <div class=\"img_cell\" v-for=\"(item,index) in itemList\" :key=\"item.pid\" >\r\n\t\t\t\t\t  <van-image\r\n\t\t\t\t\t  \t\tclass=\"img_show\"\r\n\t\t\t\t\t  \t\tfit=\"cover\"\r\n\t\t\t\t\t  \t\tlazy-load\r\n\t\t\t\t\t  \t\t@click=\"showImg(index)\"\r\n\t\t\t\t\t  \t\t:src=\"item.sm_src\"\r\n\t\t\t\t\t  />\r\n\t\t\t\t  </div>\r\n\t\t\t\t</van-list>\r\n\t\t\t\t</van-pull-refresh>\r\n\t\t</div>\r\n\t\t<van-image-preview  class=\"img_item_show\" :show-index=\"false\" :start-position=\"index\" v-if=\"isShow\" v-model:show=\"show\" :images=\"imgList\" @change=\"onChange\" :before-close=\"closeImg\">\r\n\t\t  <template v-slot:cover>\r\n\t\t\t  <div class=\"todo\">\r\n\t\t\t\t  <div class=\"msg\"></div>\r\n\t\t\t\t  <div class=\"concelltion\">\r\n\t\t\t\t\t  <van-icon name=\"like-o\" size=\"6vw\"></van-icon>\r\n\t\t\t\t  </div>\r\n\t\t\t\t  <div class=\"download\" @click=\"down\">\r\n\t\t\t\t\t  <van-icon name=\"down\" size=\"6vw\"></van-icon>\r\n\t\t\t\t  </div>\r\n\t\t\t\t  <div class=\"share\">\r\n\t\t\t\t\t  <van-icon name=\"share-o\" size=\"6vw\"></van-icon>\r\n\t\t\t\t  </div>\r\n\t\t\t\t  <div class=\"more\">\r\n\t\t\t\t\t  <van-icon name=\"ellipsis\" size=\"6vw\"></van-icon>\r\n\t\t\t\t  </div>\r\n\t\t\t  </div>\r\n\t\t  </template>\r\n\t\t</van-image-preview>\r\n\t</div>\n</template>\n\n<script>\r\n\timport axios from 'axios';\r\n\timport { Swipe, SwipeItem,Image,Lazyload,List,ImagePreview,PullRefresh } from 'vant';\r\n\texport default{\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\tprominantImgList: [\r\n\t\t\t\t\t'http://qiniu.ultraer.icu/0a5feb86-11c8-4064-a0d0-281fc2d2eef2.jpg',\r\n\t\t\t\t\t'http://qiniu.ultraer.icu/8359ffb3-e963-4db9-9cd8-e9c32abad6ed.png',\r\n\t\t\t\t\t'http://qiniu.ultraer.icu/5145d5eb-07fd-4c4d-b850-1555de715c52.png',\r\n\t\t\t\t\t'http://qiniu.ultraer.icu/8ea5c11c-77f8-424a-9bda-7dca47ebc557.png',\r\n\t\t\t\t],\r\n\t\t\t\tcid:'',\r\n\t\t\t\titemList:[],\r\n\t\t\t\timgList:[],\r\n\t\t\t\tcurrentPage:0,\r\n\t\t\t\tloading: false,\r\n\t\t\t\tfinished: false,\r\n\t\t\t\tshow:true,\r\n\t\t\t\trefreshing:false,\r\n\t\t\t\tindex:0,\r\n\t\t\t\tisShow: false,\r\n\t\t\t\timgList: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsrc:'http://qiniu.ultraer.icu/45f62654-d968-4974-94cf-957c37a9be23.png',\r\n\t\t\t\t\t\tsm_src:'http://qiniu.ultraer.icu/22532533-402a-4add-be31-8f47bb31be03.png'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsrc:'http://qiniu.ultraer.icu/35aaa9dc-baa9-4b87-8668-9533fdc50035.jpg',\r\n\t\t\t\t\t\tsm_src:'http://qiniu.ultraer.icu/921f6ed2-c580-46ad-8a22-f92714995e43.jpg'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsrc:'http://qiniu.ultraer.icu/40787418-8910-4a3c-a206-2ad78d204c28.jpg',\r\n\t\t\t\t\t\tsm_src:'http://qiniu.ultraer.icu/1e44267c-0c9f-4b52-8938-fa9ff2f02475.jpg'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsrc:'http://qiniu.ultraer.icu/c352016c-f75e-4efd-881a-d176e8a3ca20.png',\r\n\t\t\t\t\t\tsm_src:'http://qiniu.ultraer.icu/7c833a17-05a8-4ffe-af36-3af13cfc0f81.png'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsrc:'http://qiniu.ultraer.icu/74a892c4-a202-4050-966c-3e8809ee173d.png',\r\n\t\t\t\t\t\tsm_src:'http://qiniu.ultraer.icu/a9b225f5-f202-4944-b259-5a376672bb5e.png'\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\tindex:0,\r\n\t\t\t\tvalue: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.$store.state.toucherShow = false;\r\n\t\t},\r\n\t\tdestroyed() {\r\n\t\t\tthis.$store.state.toucherShow = true;\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tselect(index){\r\n\t\t\t\tvar lis = document.getElementsByClassName('topMenu-item');\r\n\t\t\t\tlis[0].classList.remove('selected');\r\n\t\t\t\tlis[1].classList.remove('selected');\r\n\t\t\t\tlis[index].classList.add('selected');\r\n\t\t\t\tif(index == 0){\r\n\t\t\t\t\tvar con1 = document.getElementsByClassName('con_1')[0];\r\n\t\t\t\t\tvar con2 = document.getElementsByClassName('con_2')[0];\r\n\t\t\t\t\tcon2.style.display = 'none';\r\n\t\t\t\t\tcon1.style.display = 'block';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar con1 = document.getElementsByClassName('con_1')[0];\r\n\t\t\t\t\tvar con2 = document.getElementsByClassName('con_2')[0];\r\n\t\t\t\t\tcon2.style.display = 'block';\r\n\t\t\t\t\tcon1.style.display = 'none';\r\n\t\t\t\t}\r\n\t\t\t\twindow.scrollTo({\r\n\t\t\t\t    top: 0, \r\n\t\t\t\t    behavior: \"smooth\" \r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tback(){\r\n\t\t\t\thistory.back();\r\n\t\t\t},\r\n\t\t\tonLoad(){\r\n\t\t\t\tif(this.$route.query.cid != null){\r\n\t\t\t\t\taxios.get('http://42.240.141.211/WallpaperController/queryPhoneByCategoryOrderByTime?cid='+this.cid+'&currentPage='+this.currentPage)\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tif(res.data.length == 0){\r\n\t\t\t\t\t\t\t\t this.loading = false;\r\n\t\t\t\t\t\t\t\t this.finished = true;\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tfor(var i = 0 ; i < res.data.length; i++){\r\n\t\t\t\t\t\t\t\t\tthis.itemList.push(res.data[i]);\r\n\t\t\t\t\t\t\t\t\tthis.imgList.push(res.data[i].src);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t\t\t\tthis.currentPage = this.currentPage + 1;\r\n\t\t\t\t\t\t\t\tsetInterval( ()=> {\r\n\t\t\t\t\t\t\t\t\tif(this.itemList.length>0){\r\n\t\t\t\t\t\t\t\t\t\tthis.refreshing = false;\r\n\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},2000)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.value = this.$route.query.category;\r\n\t\t\t\t\tconsole.log('http://42.240.141.211/WallpaperController/searchPhoneByKeyWord?keyword='+this.value+'currentPage='+this.currentPage);\r\n\t\t\t\t\taxios.get('http://42.240.141.211/WallpaperController/searchPhoneByKeyWord?keyword='+this.value+'&currentPage='+this.currentPage)\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tif(res.data.length == 0){\r\n\t\t\t\t\t\t\t\t this.loading = false;\r\n\t\t\t\t\t\t\t\t this.finished = true;\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tfor(var i = 0 ; i < res.data.length; i++){\r\n\t\t\t\t\t\t\t\t\tthis.itemList.push(res.data[i]);\r\n\t\t\t\t\t\t\t\t\tthis.imgList.push(res.data[i].src);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t\t\t\tthis.currentPage = this.currentPage + 1;\r\n\t\t\t\t\t\t\t\tsetInterval( ()=> {\r\n\t\t\t\t\t\t\t\t\tif(this.itemList.length>0){\r\n\t\t\t\t\t\t\t\t\t\tthis.refreshing = false;\r\n\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},2000)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonChange(newIndex){\r\n\t\t\t\tthis.currentImg = newIndex;\r\n\t\t\t},\r\n\t\t\tonRefresh(){\r\n\t\t\t\tthis.finished = false;\r\n\t\t\t\tthis.itemList.length = 0;\t\r\n\t\t\t\t// 重新加载数据\r\n\t\t\t\t// 将 loading 设置为 true，表示处于加载状态\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\tthis.currentPage = 0;\r\n\t\t\t\tthis.onLoad();\r\n\t\t\t},\r\n\t\t\tcloseImg(){\r\n\t\t\t\tthis.isShow = !this.isShow;\r\n\t\t\t},\r\n\t\t\tshowImg(index){\r\n\t\t\t  this.index = index;\r\n\t\t\t  this.isShow = !this.isShow;\r\n\t\t\t  return false;\r\n\t\t\t},\r\n\t\t\tdown(){\r\n\t\t\t\tconsole.log(this.imgList[this.index]);\r\n\t\t\t\tvar name = this.imgList[this.index].split('/').slice(-1)[0];\r\n\t\t\t\tthis.downloadIamge(this.imgList[this.index],name);\r\n\t\t\t}, \r\n\t\t\tmoveFile(fileEntry,dstEntry){\r\n\t\t\t\t// move the file to a new directory and rename it\r\n\t\t\t\tfileEntry.moveTo( dstEntry, \"newfile.txt\", function( entry ){\r\n\t\t\t\t\tplus.console.log(\"New Path: \" + entry.fullPath);\r\n\t\t\t\t}, function( e ){\r\n\t\t\t\t\talert( e.message );\r\n\t\t\t\t} );\r\n\t\t\t},\r\n\t\t\tdownloadIamge(imgsrc, name) {\r\n\t\t\t\tvar relativePath = \"/Pictures/WAPA/\"+name;\r\n\t\t\t\tvar dtask = plus.downloader.createDownload(imgsrc, {\r\n\t\t\t\t\tmethod:'GET',\r\n\t\t\t\t\tfilename:'_downloads/'+name\r\n\t\t\t\t}, function(d, status) {  \r\n\t\t\t\t                if (status == 200) {\r\n\t\t\t\t\t\t\t\t\tvar fileSaveUrl = plus.io.convertLocalFileSystemURL(d.filename);\r\n\t\t\t\t\t\t\t\t\tplus.gallery.save(fileSaveUrl,() => {\r\n\t\t\t\t\t\t\t\t\t\talert('保存完成');\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t// var environment = plus.android.importClass('android.os.Environment');\r\n\t\t\t\t\t\t\t\t\t// var sdRoot = environment.getExternalStorageDirectory();\r\n\t\t\t\t\t\t\t\t\t// var File = plus.android.importClass('java.io.File');\r\n\t\t\t\t\t\t\t\t\t// var fileIn = plus.android.importClass('java.io.FileInputStream');\r\n\t\t\t\t\t\t\t\t\t// var fileOut = plus.android.importClass('java.io.FileOutputStream');\r\n\t\t\t\t\t\t\t\t\t// // var inStream = plus.android.importClass('java.io.InputStream');\r\n\t\t\t\t\t\t\t\t\t// // var out = plus.android.importClass('java.io.OutputStream');\r\n\t\t\t\t\t\t\t\t\t// console.log(sdRoot+'/Pictures/WAPA');\r\n\t\t\t\t\t\t\t\t\t// var fd = new File(sdRoot+'/Pictures/WAPA');\r\n\t\t\t\t\t\t\t\t\t// var byte = plus.android.importClass('java.lang.Byte');\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t// var temp = new File(fileSaveUrl);\r\n\t\t\t\t\t\t\t\t\t// if(!fd.exists()){\r\n\t\t\t\t\t\t\t\t\t// \tfd.mkdirs();\r\n\t\t\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\t\t\t// streamFrom = new fileIn(fileSaveUrl);\r\n\t\t\t\t\t\t\t\t\t// streamTo = new fileOut(fd+'/'+name);\r\n\t\t\t\t\t\t\t\t\t// var len = 0;\r\n\t\t\t\t\t\t\t\t\t// while((len = streamFrom.read()) != -1){\r\n\t\t\t\t\t\t\t\t\t// \tstreamTo.write(len);\r\n\t\t\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\t\t\t// streamFrom.close();\r\n\t\t\t\t\t\t\t\t\t// streamTo.close();\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t} else { \r\n\t\t\t\t                    alert('下载失败');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t            });\r\n\t\t\t\t            //启动下载任务  \r\n\t\t\t\t            dtask.start();  \r\n\t\t\t},\r\n\t\t}\r\n\t}\n</script>\n\n<style scoped=\"scoped\" lang=\"scss\">\r\n\t.content{\r\n\t\twidth: 100vw;\r\n\t\theight: auto;\r\n\t\tbackground-color: #dfdfdf;\r\n\t\t.swiper{\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 25vh;\r\n\t\t\tmargin: 0;\r\n\t\t\t\r\n\t\t}\r\n\t\t.topMenu_title{\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 7vh;\r\n\t\t\tbackground-color: #000;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: row;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\t.ret{\r\n\t\t\t\tpadding-left: 10px;\r\n\t\t\t\tflex: 6;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t}\r\n\t\t\t.title{\r\n\t\t\t\tflex: 9;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t.topMenu{\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 7vh;\r\n\t\t\tposition: sticky;\r\n\t\t\ttop:0;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: row;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\tz-index: 999;\r\n\t\t\tpadding: 0px 0vw;\r\n\t\t\t.topMenu-item{\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tline-height: 5vh;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tfont-weight: 510;\r\n\t\t\t\tmargin: 0 1vw;\r\n\t\t\t\tborder-bottom: 3px solid #eeeeee;\r\n\t\t\t\ttransition: all 0.2s;\r\n\t\t\t}\r\n\t\t\t.selected{\r\n\t\t\t\tborder-bottom: 3px solid #ffa361;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.my-swipe .van-swipe-item {\r\n\t  margin:0;\r\n\t  color: #fff;\r\n\t  line-height: 25vh;\r\n\t  text-align: center;\r\n\t  background-color: #2d2d2d;\r\n\t}\r\n\t.swipe-img{\r\n\t\twidth: 100%;\r\n\t\theight: 25vh;\r\n\t}\r\n\t.swipe-item{\r\n\t\twidth: 100%;\r\n\t\theight: 25vh;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t.con_1{\r\n\t\twidth: 100%;\r\n\t\theight: auto;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\t.list{\r\n\t\twidth: 100%;\r\n\t\theight: auto;\r\n\t\tmargin-top: -1vh;\r\n\t\t.img_cell{\r\n\t\t\twidth: 100%;\r\n\t\t\theight: auto;\r\n\t\t\tmargin: 2vh 0px;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tposition: relative;\r\n\t\t\t.item_top{\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 4vh;\r\n\t\t\t\tbackground-color: #fff;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: row;\r\n\t\t\t\t.username{\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\tline-height: 4vh;\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\tfont-size: 1.1rem;\r\n\t\t\t\t\tmargin-left: 3vw;\r\n\t\t\t\t\tcolor:#000;\r\n\t\t\t\t}\r\n\t\t\t\t.date_title{\r\n\t\t\t\t\tpadding-right: 3vw;\r\n\t\t\t\t\tflex:4;\r\n\t\t\t\t\tline-height: 4vh;\r\n\t\t\t\t\ttext-align: right;\r\n\t\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t\t\tcolor: #3b9ce6;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.img_show{\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 33vh;\r\n\t\t\t\tbackground-color: #000;\r\n\t\t\t}\r\n\t\t\t.item_msg{\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 6vh;\r\n\t\t\t\tbackground-color: rgba($color: #fff, $alpha: 1);\r\n\t\t\t\tbottom: 0vh;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.con_2{\r\n\t\twidth: 100%;\r\n\t\theight: 180vh;\r\n\t\tdisplay: none;\r\n\t\tbackground-color: #4aff5f;\r\n\t}\r\n\t.todo{\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\twidth: 100vw;\r\n\t\theight: 7vh;\r\n\t\tline-height: 7vh;\r\n\t\tcolor: #fff;\r\n\t\t background-color:rgba(0, 0, 0, 0.6);\r\n\t\tz-index: 999;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\t.msg{\r\n\t\t\tflex: 4;\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\t\t.concelltion{\r\n\t\t\tflex: 1;\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\t\t.download{\r\n\t\t\ttext-align: center;\r\n\t\t\tflex: 1;\r\n\t\t}\r\n\t\t.share{\r\n\t\t\ttext-align: center;\r\n\t\t\tflex:1;\r\n\t\t}\r\n\t\t.more{\r\n\t\t\tflex: 1;\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\t}\r\n\t.img_item_show{\r\n\t\tz-index: 11;\r\n\t}\n</style>\n","import { render } from \"./PicCircle.vue?vue&type=template&id=54d15ad2&scoped=true\"\nimport script from \"./PicCircle.vue?vue&type=script&lang=js\"\nexport * from \"./PicCircle.vue?vue&type=script&lang=js\"\n\nimport \"./PicCircle.vue?vue&type=style&index=0&id=54d15ad2&scoped=scoped&lang=scss\"\n\nimport exportComponent from \"E:\\\\网页设计\\\\ultra\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-54d15ad2\"]])\n\nexport default __exports__","(function (factory) {\n    if (typeof exports === 'object') {\n        // Node/CommonJS\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(factory);\n    } else {\n        // Browser globals (with support for web workers)\n        var glob;\n\n        try {\n            glob = window;\n        } catch (e) {\n            glob = self;\n        }\n\n        glob.SparkMD5 = factory();\n    }\n}(function (undefined) {\n\n    'use strict';\n\n    /*\n     * Fastest md5 implementation around (JKM md5).\n     * Credits: Joseph Myers\n     *\n     * @see http://www.myersdaily.org/joseph/javascript/md5-text.html\n     * @see http://jsperf.com/md5-shootout/7\n     */\n\n    /* this function is much faster,\n      so if possible we use it. Some IEs\n      are the only ones I know of that\n      need the idiotic second function,\n      generated by an if clause.  */\n    var add32 = function (a, b) {\n        return (a + b) & 0xFFFFFFFF;\n    },\n        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n\n\n    function cmn(q, a, b, x, s, t) {\n        a = add32(add32(a, q), add32(x, t));\n        return add32((a << s) | (a >>> (32 - s)), b);\n    }\n\n    function md5cycle(x, k) {\n        var a = x[0],\n            b = x[1],\n            c = x[2],\n            d = x[3];\n\n        a += (b & c | ~b & d) + k[0] - 680876936 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[1] - 389564586 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[2] + 606105819 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[3] - 1044525330 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[4] - 176418897 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[5] + 1200080426 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[6] - 1473231341 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[7] - 45705983 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[8] + 1770035416 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[9] - 1958414417 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[10] - 42063 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[11] - 1990404162 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[12] + 1804603682 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[13] - 40341101 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[14] - 1502002290 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[15] + 1236535329 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n\n        a += (b & d | c & ~d) + k[1] - 165796510 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[6] - 1069501632 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[11] + 643717713 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[0] - 373897302 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[5] - 701558691 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[10] + 38016083 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[15] - 660478335 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[4] - 405537848 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[9] + 568446438 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[14] - 1019803690 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[3] - 187363961 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[8] + 1163531501 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[13] - 1444681467 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[2] - 51403784 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[7] + 1735328473 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[12] - 1926607734 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n\n        a += (b ^ c ^ d) + k[5] - 378558 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[8] - 2022574463 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[11] + 1839030562 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[14] - 35309556 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[1] - 1530992060 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[4] + 1272893353 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[7] - 155497632 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[10] - 1094730640 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[13] + 681279174 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[0] - 358537222 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[3] - 722521979 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[6] + 76029189 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[9] - 640364487 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[12] - 421815835 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[15] + 530742520 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[2] - 995338651 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n\n        a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;\n        b  = (b << 21 | b >>> 11) + c | 0;\n\n        x[0] = a + x[0] | 0;\n        x[1] = b + x[1] | 0;\n        x[2] = c + x[2] | 0;\n        x[3] = d + x[3] | 0;\n    }\n\n    function md5blk(s) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n        }\n        return md5blks;\n    }\n\n    function md5blk_array(a) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n        }\n        return md5blks;\n    }\n\n    function md51(s) {\n        var n = s.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk(s.substring(i - 64, i)));\n        }\n        s = s.substring(i - 64);\n        length = s.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\n        }\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n        return state;\n    }\n\n    function md51_array(a) {\n        var n = a.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n        }\n\n        // Not sure if it is a bug, however IE10 will always produce a sub array of length 1\n        // containing the last element of the parent array if the sub array specified starts\n        // beyond the length of the parent array - weird.\n        // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue\n        a = (i - 64) < n ? a.subarray(i - 64) : new Uint8Array(0);\n\n        length = a.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= a[i] << ((i % 4) << 3);\n        }\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n\n        return state;\n    }\n\n    function rhex(n) {\n        var s = '',\n            j;\n        for (j = 0; j < 4; j += 1) {\n            s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\n        }\n        return s;\n    }\n\n    function hex(x) {\n        var i;\n        for (i = 0; i < x.length; i += 1) {\n            x[i] = rhex(x[i]);\n        }\n        return x.join('');\n    }\n\n    // In some cases the fast add32 function cannot be used..\n    if (hex(md51('hello')) !== '5d41402abc4b2a76b9719d911017c592') {\n        add32 = function (x, y) {\n            var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n                msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n            return (msw << 16) | (lsw & 0xFFFF);\n        };\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * ArrayBuffer slice polyfill.\n     *\n     * @see https://github.com/ttaubert/node-arraybuffer-slice\n     */\n\n    if (typeof ArrayBuffer !== 'undefined' && !ArrayBuffer.prototype.slice) {\n        (function () {\n            function clamp(val, length) {\n                val = (val | 0) || 0;\n\n                if (val < 0) {\n                    return Math.max(val + length, 0);\n                }\n\n                return Math.min(val, length);\n            }\n\n            ArrayBuffer.prototype.slice = function (from, to) {\n                var length = this.byteLength,\n                    begin = clamp(from, length),\n                    end = length,\n                    num,\n                    target,\n                    targetArray,\n                    sourceArray;\n\n                if (to !== undefined) {\n                    end = clamp(to, length);\n                }\n\n                if (begin > end) {\n                    return new ArrayBuffer(0);\n                }\n\n                num = end - begin;\n                target = new ArrayBuffer(num);\n                targetArray = new Uint8Array(target);\n\n                sourceArray = new Uint8Array(this, begin, num);\n                targetArray.set(sourceArray);\n\n                return target;\n            };\n        })();\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * Helpers.\n     */\n\n    function toUtf8(str) {\n        if (/[\\u0080-\\uFFFF]/.test(str)) {\n            str = unescape(encodeURIComponent(str));\n        }\n\n        return str;\n    }\n\n    function utf8Str2ArrayBuffer(str, returnUInt8Array) {\n        var length = str.length,\n           buff = new ArrayBuffer(length),\n           arr = new Uint8Array(buff),\n           i;\n\n        for (i = 0; i < length; i += 1) {\n            arr[i] = str.charCodeAt(i);\n        }\n\n        return returnUInt8Array ? arr : buff;\n    }\n\n    function arrayBuffer2Utf8Str(buff) {\n        return String.fromCharCode.apply(null, new Uint8Array(buff));\n    }\n\n    function concatenateArrayBuffers(first, second, returnUInt8Array) {\n        var result = new Uint8Array(first.byteLength + second.byteLength);\n\n        result.set(new Uint8Array(first));\n        result.set(new Uint8Array(second), first.byteLength);\n\n        return returnUInt8Array ? result : result.buffer;\n    }\n\n    function hexToBinaryString(hex) {\n        var bytes = [],\n            length = hex.length,\n            x;\n\n        for (x = 0; x < length - 1; x += 2) {\n            bytes.push(parseInt(hex.substr(x, 2), 16));\n        }\n\n        return String.fromCharCode.apply(String, bytes);\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation.\n     *\n     * Use this class to perform an incremental md5, otherwise use the\n     * static methods instead.\n     */\n\n    function SparkMD5() {\n        // call reset to init the instance\n        this.reset();\n    }\n\n    /**\n     * Appends a string.\n     * A conversion will be applied if an utf8 string is detected.\n     *\n     * @param {String} str The string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.append = function (str) {\n        // Converts the string to utf8 bytes if necessary\n        // Then append as binary\n        this.appendBinary(toUtf8(str));\n\n        return this;\n    };\n\n    /**\n     * Appends a binary string.\n     *\n     * @param {String} contents The binary string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.appendBinary = function (contents) {\n        this._buff += contents;\n        this._length += contents.length;\n\n        var length = this._buff.length,\n            i;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));\n        }\n\n        this._buff = this._buff.substring(i - 64);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            i,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff.charCodeAt(i) << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.reset = function () {\n        this._buff = '';\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.prototype.getState = function () {\n        return {\n            buff: this._buff,\n            length: this._length,\n            hash: this._hash.slice()\n        };\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.setState = function (state) {\n        this._buff = state.buff;\n        this._length = state.length;\n        this._hash = state.hash;\n\n        return this;\n    };\n\n    /**\n     * Releases memory used by the incremental buffer and other additional\n     * resources. If you plan to use the instance again, use reset instead.\n     */\n    SparkMD5.prototype.destroy = function () {\n        delete this._hash;\n        delete this._buff;\n        delete this._length;\n    };\n\n    /**\n     * Finish the final calculation based on the tail.\n     *\n     * @param {Array}  tail   The tail (will be modified)\n     * @param {Number} length The length of the remaining buffer\n     */\n    SparkMD5.prototype._finish = function (tail, length) {\n        var i = length,\n            tmp,\n            lo,\n            hi;\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(this._hash, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Do the final computation based on the tail and length\n        // Beware that the final length may not fit in 32 bits so we take care of that\n        tmp = this._length * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(this._hash, tail);\n    };\n\n    /**\n     * Performs the md5 hash on a string.\n     * A conversion will be applied if utf8 string is detected.\n     *\n     * @param {String}  str The string\n     * @param {Boolean} [raw] True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hash = function (str, raw) {\n        // Converts the string to utf8 bytes if necessary\n        // Then compute it using the binary function\n        return SparkMD5.hashBinary(toUtf8(str), raw);\n    };\n\n    /**\n     * Performs the md5 hash on a binary string.\n     *\n     * @param {String}  content The binary string\n     * @param {Boolean} [raw]     True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hashBinary = function (content, raw) {\n        var hash = md51(content),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation for array buffers.\n     *\n     * Use this class to perform an incremental md5 ONLY for array buffers.\n     */\n    SparkMD5.ArrayBuffer = function () {\n        // call reset to init the instance\n        this.reset();\n    };\n\n    /**\n     * Appends an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array to be appended\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.append = function (arr) {\n        var buff = concatenateArrayBuffers(this._buff.buffer, arr, true),\n            length = buff.length,\n            i;\n\n        this._length += arr.byteLength;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));\n        }\n\n        this._buff = (i - 64) < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            i,\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff[i] << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.reset = function () {\n        this._buff = new Uint8Array(0);\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.ArrayBuffer.prototype.getState = function () {\n        var state = SparkMD5.prototype.getState.call(this);\n\n        // Convert buffer to a string\n        state.buff = arrayBuffer2Utf8Str(state.buff);\n\n        return state;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.setState = function (state) {\n        // Convert string to buffer\n        state.buff = utf8Str2ArrayBuffer(state.buff, true);\n\n        return SparkMD5.prototype.setState.call(this, state);\n    };\n\n    SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n\n    SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n\n    /**\n     * Performs the md5 hash on an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array buffer\n     * @param {Boolean}     [raw] True to get the raw string, false to get the hex one\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.hash = function (arr, raw) {\n        var hash = md51_array(new Uint8Array(arr)),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    return SparkMD5;\n}));\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./uploadImg.vue?vue&type=style&index=0&id=3d8e8f7a&scoped=scoped&lang=scss\"","<template>\r\n\t<div class=\"upload\">\r\n\t\t<div class=\"topBar\">\r\n\t\t\t<van-icon @click=\"back\" name=\"arrow-left\" size=\"25\" class=\"ret\"/>\r\n\t\t\t<h4 class=\"title\">好图推荐</h4>\r\n\t\t</div>\r\n\t\t<div class=\"content\">\r\n\t\t\t<div class=\"upload_content\">\r\n\t\t\t\t<h4 class=\"pic_title\">图片选择</h4>\r\n\t\t\t\t<van-uploader class=\"fileUpload\" v-model=\"fileList\" multiple :max-count=\"1\"  :max-size=\"10000 * 1024\" @oversize=\"onOversize\" />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"tag_content\">\r\n\t\t\t\t<h4>标签选择</h4>\r\n\t\t\t\t<div v-for=\"(item,index) in tags\" :key=\"index\"  :class=\"tags_flag[index] ? 'tag_item_active' : 'tag_item'\"  @click=\"addTag(index)\">{{item}}</div>\r\n\t\t\t\t<div class=\"tag_item\" @click=\"showPopup\">\r\n\t\t\t\t\t<van-icon name=\"plus\"></van-icon>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"btn\" @click=\"upload\">图片上传</div>\r\n\t\t</div>\r\n\t\t<van-popup\r\n\t\t  @close=\"close\"\r\n\t\t  v-model:show=\"show\"\r\n\t\t  round\r\n\t\t  position=\"bottom\"\r\n\t\t  :style=\"{ height: '20%' }\"\r\n\t\t  class=\"pop\"\r\n\t\t>\r\n\t\t\t<h4 class=\"pop_title\">请输入添加标签名</h4>\r\n\t\t\t<input ref=\"tag_input\" class=\"tag_input\" v-model=\"current_item\" />\r\n\t\t</van-popup>\r\n\t</div>\n</template>\n\n<script>\r\n\timport { Uploader,Popup } from 'vant';\r\n\timport axios from 'axios';\r\n\timport * as qiniu from 'qiniu-js';\r\n\texport default{\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\ttags: ['动漫','人物','景色','摄影','影视','唯美','游戏','宠物','植物','森林','天空'],\r\n\t\t\t\ttags_flag: [false,false,false,false,false,false,false,false,false,false,false],\r\n\t\t\t\tcurrentTag: [],\r\n\t\t\t\tfileList: [],\r\n\t\t\t\tcurrent_item:'',\r\n\t\t\t\tshow:false,\r\n\t\t\t\tcontrol: false,\r\n\t\t\t\tcurrent_file: '',\r\n\t\t\t\tformData: {\r\n\t\t\t\t\tfileName: '',\r\n\t\t\t\t\ttags: '',\r\n\t\t\t\t\tuid:'',\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\taddTag(index){\r\n\t\t\t\tif(this.tags_flag[index]){\r\n\t\t\t\t\tvar arr_index = this.currentTag.indexOf(this.tags[index]);\r\n\t\t\t\t\tthis.currentTag.splice(arr_index,1);\r\n\t\t\t\t\tthis.tags_flag[index] = false;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.currentTag.push(this.tags[index]);\r\n\t\t\t\t\tthis.tags_flag[index] = true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshowPopup(){\r\n\t\t\t\tthis.show = true;\r\n\t\t\t\tthis.control = true;\r\n\t\t\t},\r\n\t\t\tonOversize(file){\r\n\t\t\t\t console.log('图片大小不能超过10m');\r\n\t\t\t},\r\n\t\t\tclose(){\r\n\t\t\t\tif(this.control){\r\n\t\t\t\t\tif(this.current_item != ''){\r\n\t\t\t\t\t\tthis.tags.push(this.current_item);\r\n\t\t\t\t\t\tthis.current_item='';\r\n\t\t\t\t\t\tthis.control = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tafterRead(file){\r\n\t\t\t\tthis.current_file = file;\r\n\t\t\t\tconsole.log(file);\r\n\t\t\t},\r\n\t\t\tback(){\r\n\t\t\t\tthis.$router.push('/home');\r\n\t\t\t},\r\n\t\t\tupload(){\r\n\t\t\t\t\tvar tags = '';\r\n\t\t\t\t\tvar len = this.currentTag.length;\r\n\t\t\t\t\tfor(var i = 0; i < len; i++){\r\n\t\t\t\t\t\tif(i != (len-1) ){\r\n\t\t\t\t\t\t\ttags = tags + this.currentTag[i]+'/';\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\ttags = tags + this.currentTag[i]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.formData.fileName = this.fileList[0].file.name;\r\n\t\t\t\t\tthis.formData.tags = tags;\r\n\t\t\t\t\tthis.formData.uid = 1;\r\n\t\t\t\t\tvar formData = JSON.stringify(this.formData);\r\n\t\t\t\t\tvar file = this.fileList[0];\r\n\t\t\t\t\taxios({\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t    'Content-Type': 'application/json;charset=UTF-8'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmethod:\"post\",\r\n\t\t\t\t\t\turl: 'http://42.240.141.211/WallpaperController/insertUserWallpaper',\r\n\t\t\t\t\t\tdataType:'json',\r\n\t\t\t\t\t\tcontentType: 'application/json',\r\n\t\t\t\t\t\tdata: formData,\r\n\t\t\t\t\t}).then(res=>{\r\n\t\t\t\t\t\tif(res.data == '图片上传失败'){\r\n\t\t\t\t\t\t\talert('图片上传失败');\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t// console.log(qiniu);\r\n\t\t\t\t\t\t\t    const observer = {\r\n\t\t\t\t\t\t\t      next(res){\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t      },\r\n\t\t\t\t\t\t\t      error(err){\r\n\t\t\t\t\t\t\t        alert('上传错误');\r\n\t\t\t\t\t\t\t      },\r\n\t\t\t\t\t\t\t      complete(res){\r\n\t\t\t\t\t\t\t      }\r\n\t\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t\tthis.img = res.data;\r\n\t\t\t\t\t\t\tconst config = {\r\n\t\t\t\t\t\t\t\t//是否使用cdn加速域名\r\n\t\t\t\t\t\t\t\tuseCdnDomain: true,\r\n\t\t\t\t\t\t\t\t//默认传输协议\r\n\t\t\t\t\t\t\t\tupprotocol: 'http',\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tconst putExtra1 = {\r\n\t\t\t\t\t\t\t  fname: this.img.src.split('/').slice(-1)[0],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tconst putExtra2 = {\r\n\t\t\t\t\t\t\t  fname: this.img.sm_src.split('/').slice(-1)[0],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tconst observable = qiniu.upload(this.fileList[0].file, this.img.src.split('/').slice(-1)[0], res.data.token, putExtra1, config);\t\t\t\t\r\n\t\t\t\t\t\t\tconst subscription = observable.subscribe(observer); // 上传开始\r\n\t\t\t\t\t\t\tconst options = {\r\n\t\t\t\t\t\t\t  quality: 0.82,\r\n\t\t\t\t\t\t\t  noCompressIfLarger: true,\r\n\t\t\t\t\t\t\t  maxWidth: 720,\r\n\t\t\t\t\t\t\t  maxHeight: 560,\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tqiniu.compressImage(this.fileList[0].file, options).then(data => {\r\n\t\t\t\t\t\t\t  const observable = qiniu.upload(data.dist, this.img.sm_src.split('/').slice(-1)[0], res.data.token, putExtra2, config)\r\n\t\t\t\t\t\t\t  const subscription = observable.subscribe(observer) // 上传开始\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\talert('上传成功');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.$store.state.toucherShow = false;\r\n\t\t},\r\n\t\tdestroyed() {\r\n\t\t\tthis.$store.state.toucherShow = true;\r\n\t\t},\r\n\t}\n</script>\n\n<style scoped=\"scoped\" lang=\"scss\">\r\n\t.pop{\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\t.pop_title{\r\n\t\tflex: 1;\r\n\t\ttext-align: center;\r\n\t}\r\n\t.tag_input{\r\n\t\tflex: 1;\r\n\t\twidth: 80%;\r\n\t\theight: 5vh;\r\n\t\tmargin-left: 9vw;\r\n\t}\r\n\t.upload{\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t\tbackground-color: #e7e7e7;\r\n\t\t.topBar{\r\n\t\t\tpadding: 0 10px;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\twidth: 100vw;\r\n\t\t\theight: 5.5vh;\r\n\t\t\tbackground-color: #000;\r\n\t\t\tcolor: #fff;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: row;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\t.ret{\r\n\t\t\t\tflex: 6;\r\n\t\t\t}\r\n\t\t\t.title{\r\n\t\t\t\tflex: 9;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.content{\r\n\t\t\tposition: relative;\r\n\t\t\twidth: 100vw;\r\n\t\t\theight: 50vh;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\t.upload_content{\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tbackground-color: #fff;\r\n\t\t\t\tmargin:1vh 0;\r\n\t\t\t\tmargin-top: 0;\r\n\t\t\t\tpadding: 0 4.5vw;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\t.pic_title{\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t}\r\n\t\t\t\t.fileUpload{\r\n\t\t\t\t\t--van-uploader-size: 100px;\r\n\t\t\t\t\tflex: 4;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.tag_content{\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tbackground-color: #fff;\r\n\t\t\t\tpadding: 0 4.5vw;\r\n\t\t\t\tpadding-bottom: 1vh;\r\n\t\t\t\t.tag_item{\r\n\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t\tmargin: 0.5vh 1.5vw;\r\n\t\t\t\t\twidth: 15vw;\r\n\t\t\t\t\tline-height: 5vh;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\tborder-radius: 10px;\r\n\t\t\t\t\theight: 5vh;\r\n\t\t\t\t\tbackground-color: #8c8c8c;\r\n\t\t\t\t}\r\n\t\t\t\t.tag_item_active{\r\n\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t\tmargin: 0.5vh 1.5vw;\r\n\t\t\t\t\twidth: 15vw;\r\n\t\t\t\t\tline-height: 5vh;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\tborder-radius: 10px;\r\n\t\t\t\t\theight: 5vh;\r\n\t\t\t\t\t// background-image: linear-gradient(to bottom right,#5fa0f0, #aa00ff);\r\n\t\t\t\t\tbackground-color: #5fa0f0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.btn{\r\n\t\t\t\tbackground-color: #577ed8;\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\twidth: 90%;\r\n\t\t\t\theight: 6vh;\r\n\t\t\t\tline-height: 6vh;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tmargin-top: 3vh;\r\n\t\t\t\tfont-size: 1.3rem;\r\n\t\t\t\talign-self: center;\r\n\t\t\t\tbottom: -8vh;\r\n\t\t\t}\r\n\t\t}\r\n\t}\n</style>\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexport var QiniuErrorName;\n(function (QiniuErrorName) {\n    // 输入错误\n    QiniuErrorName[\"InvalidFile\"] = \"InvalidFile\";\n    QiniuErrorName[\"InvalidToken\"] = \"InvalidToken\";\n    QiniuErrorName[\"InvalidMetadata\"] = \"InvalidMetadata\";\n    QiniuErrorName[\"InvalidChunkSize\"] = \"InvalidChunkSize\";\n    QiniuErrorName[\"InvalidCustomVars\"] = \"InvalidCustomVars\";\n    QiniuErrorName[\"NotAvailableUploadHost\"] = \"NotAvailableUploadHost\";\n    // 缓存相关\n    QiniuErrorName[\"ReadCacheFailed\"] = \"ReadCacheFailed\";\n    QiniuErrorName[\"InvalidCacheData\"] = \"InvalidCacheData\";\n    QiniuErrorName[\"WriteCacheFailed\"] = \"WriteCacheFailed\";\n    QiniuErrorName[\"RemoveCacheFailed\"] = \"RemoveCacheFailed\";\n    // 图片压缩模块相关\n    QiniuErrorName[\"GetCanvasContextFailed\"] = \"GetCanvasContextFailed\";\n    QiniuErrorName[\"UnsupportedFileType\"] = \"UnsupportedFileType\";\n    // 运行环境相关\n    QiniuErrorName[\"FileReaderReadFailed\"] = \"FileReaderReadFailed\";\n    QiniuErrorName[\"NotAvailableXMLHttpRequest\"] = \"NotAvailableXMLHttpRequest\";\n    QiniuErrorName[\"InvalidProgressEventTarget\"] = \"InvalidProgressEventTarget\";\n    // 请求错误\n    QiniuErrorName[\"RequestError\"] = \"RequestError\";\n})(QiniuErrorName || (QiniuErrorName = {}));\nvar QiniuError = /** @class */ (function () {\n    function QiniuError(name, message) {\n        this.name = name;\n        this.message = message;\n        this.stack = new Error().stack;\n    }\n    return QiniuError;\n}());\nexport { QiniuError };\nvar QiniuRequestError = /** @class */ (function (_super) {\n    __extends(QiniuRequestError, _super);\n    function QiniuRequestError(code, reqId, message, data) {\n        var _this = _super.call(this, QiniuErrorName.RequestError, message) || this;\n        _this.code = code;\n        _this.reqId = reqId;\n        /**\n         * @description 标记当前的 error 类型是一个 QiniuRequestError\n         * @deprecated 下一个大版本将会移除，不推荐使用，推荐直接使用 instanceof 进行判断\n         */\n        _this.isRequestError = true;\n        _this.data = data;\n        return _this;\n    }\n    return QiniuRequestError;\n}(QiniuError));\nexport { QiniuRequestError };\n/**\n * @description 由于跨域、证书错误、断网、host 解析失败、系统拦截等原因导致的错误\n */\nvar QiniuNetworkError = /** @class */ (function (_super) {\n    __extends(QiniuNetworkError, _super);\n    function QiniuNetworkError(message, reqId) {\n        if (reqId === void 0) { reqId = ''; }\n        return _super.call(this, 0, reqId, message) || this;\n    }\n    return QiniuNetworkError;\n}(QiniuRequestError));\nexport { QiniuNetworkError };\n//# sourceMappingURL=index.js.map","var Pool = /** @class */ (function () {\n    function Pool(runTask, limit) {\n        this.runTask = runTask;\n        this.limit = limit;\n        this.queue = [];\n        this.processing = [];\n    }\n    Pool.prototype.enqueue = function (task) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            _this.queue.push({\n                task: task,\n                resolve: resolve,\n                reject: reject\n            });\n            _this.check();\n        });\n    };\n    Pool.prototype.run = function (item) {\n        var _this = this;\n        this.queue = this.queue.filter(function (v) { return v !== item; });\n        this.processing.push(item);\n        this.runTask(item.task).then(function () {\n            _this.processing = _this.processing.filter(function (v) { return v !== item; });\n            item.resolve();\n            _this.check();\n        }, function (err) { return item.reject(err); });\n    };\n    Pool.prototype.check = function () {\n        var _this = this;\n        var processingNum = this.processing.length;\n        var availableNum = this.limit - processingNum;\n        this.queue.slice(0, availableNum).forEach(function (item) {\n            _this.run(item);\n        });\n    };\n    return Pool;\n}());\nexport { Pool };\n//# sourceMappingURL=pool.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n/** 表示可清理的资源，比如 Observable 的执行 */\nvar Subscription = /** @class */ (function () {\n    function Subscription() {\n        /** 用来标示该 Subscription 是否被取消订阅的标示位 */\n        this.closed = false;\n    }\n    /** 取消 observer 的订阅 */\n    Subscription.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        if (this._unsubscribe) {\n            this._unsubscribe();\n        }\n    };\n    /** 添加一个 tear down 在该 Subscription 的 unsubscribe() 期间调用 */\n    Subscription.prototype.add = function (teardown) {\n        this._unsubscribe = teardown;\n    };\n    return Subscription;\n}());\n/**\n * 实现 Observer 接口并且继承 Subscription 类，Observer 是消费 Observable 值的公有 API\n * 所有 Observers 都转化成了 Subscriber，以便提供类似 Subscription 的能力，比如 unsubscribe\n*/\nvar Subscriber = /** @class */ (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (observerOrNext && typeof observerOrNext === 'object') {\n            _this.destination = observerOrNext;\n        }\n        else {\n            _this.destination = __assign(__assign(__assign({}, observerOrNext && { next: observerOrNext }), error && { error: error }), complete && { complete: complete });\n        }\n        return _this;\n    }\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped && this.destination.next) {\n            this.destination.next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped && this.destination.error) {\n            this.isStopped = true;\n            this.destination.error(err);\n        }\n    };\n    Subscriber.prototype.complete = function (result) {\n        if (!this.isStopped && this.destination.complete) {\n            this.isStopped = true;\n            this.destination.complete(result);\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\n/** 可观察对象，当前的上传事件的集合 */\nvar Observable = /** @class */ (function () {\n    function Observable(_subscribe) {\n        this._subscribe = _subscribe;\n    }\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var sink = new Subscriber(observerOrNext, error, complete);\n        sink.add(this._subscribe(sink));\n        return sink;\n    };\n    return Observable;\n}());\nexport { Observable };\n//# sourceMappingURL=observable.js.map","/* eslint-disable */\n// https://github.com/locutusjs/locutus/blob/master/src/php/xml/utf8_encode.js\nfunction utf8Encode(argString) {\n    // http://kevin.vanzonneveld.net\n    // +   original by: Webtoolkit.info (http://www.webtoolkit.info/)\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +   improved by: sowberry\n    // +    tweaked by: Jack\n    // +   bugfixed by: Onno Marsman\n    // +   improved by: Yves Sucaet\n    // +   bugfixed by: Onno Marsman\n    // +   bugfixed by: Ulrich\n    // +   bugfixed by: Rafal Kukawski\n    // +   improved by: kirilloid\n    // +   bugfixed by: kirilloid\n    // *     example 1: this.utf8Encode('Kevin van Zonneveld')\n    // *     returns 1: 'Kevin van Zonneveld'\n    if (argString === null || typeof argString === 'undefined') {\n        return '';\n    }\n    var string = argString + ''; // .replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n')\n    var utftext = '', start, end, stringl = 0;\n    start = end = 0;\n    stringl = string.length;\n    for (var n = 0; n < stringl; n++) {\n        var c1 = string.charCodeAt(n);\n        var enc = null;\n        if (c1 < 128) {\n            end++;\n        }\n        else if (c1 > 127 && c1 < 2048) {\n            enc = String.fromCharCode((c1 >> 6) | 192, (c1 & 63) | 128);\n        }\n        else if ((c1 & 0xf800 ^ 0xd800) > 0) {\n            enc = String.fromCharCode((c1 >> 12) | 224, ((c1 >> 6) & 63) | 128, (c1 & 63) | 128);\n        }\n        else {\n            // surrogate pairs\n            if ((c1 & 0xfc00 ^ 0xd800) > 0) {\n                throw new RangeError('Unmatched trail surrogate at ' + n);\n            }\n            var c2 = string.charCodeAt(++n);\n            if ((c2 & 0xfc00 ^ 0xdc00) > 0) {\n                throw new RangeError('Unmatched lead surrogate at ' + (n - 1));\n            }\n            c1 = ((c1 & 0x3ff) << 10) + (c2 & 0x3ff) + 0x10000;\n            enc = String.fromCharCode((c1 >> 18) | 240, ((c1 >> 12) & 63) | 128, ((c1 >> 6) & 63) | 128, (c1 & 63) | 128);\n        }\n        if (enc !== null) {\n            if (end > start) {\n                utftext += string.slice(start, end);\n            }\n            utftext += enc;\n            start = end = n + 1;\n        }\n    }\n    if (end > start) {\n        utftext += string.slice(start, stringl);\n    }\n    return utftext;\n}\n// https://github.com/locutusjs/locutus/blob/master/src/php/xml/utf8_decode.js\nfunction utf8Decode(strData) {\n    // eslint-disable-line camelcase\n    //  discuss at: https://locutus.io/php/utf8_decode/\n    // original by: Webtoolkit.info (https://www.webtoolkit.info/)\n    //    input by: Aman Gupta\n    //    input by: Brett Zamir (https://brett-zamir.me)\n    // improved by: Kevin van Zonneveld (https://kvz.io)\n    // improved by: Norman \"zEh\" Fuchs\n    // bugfixed by: hitwork\n    // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman)\n    // bugfixed by: Kevin van Zonneveld (https://kvz.io)\n    // bugfixed by: kirilloid\n    // bugfixed by: w35l3y (https://www.wesley.eti.br)\n    //   example 1: utf8_decode('Kevin van Zonneveld')\n    //   returns 1: 'Kevin van Zonneveld'\n    var tmpArr = [];\n    var i = 0;\n    var c1 = 0;\n    var seqlen = 0;\n    strData += '';\n    while (i < strData.length) {\n        c1 = strData.charCodeAt(i) & 0xFF;\n        seqlen = 0;\n        // https://en.wikipedia.org/wiki/UTF-8#Codepage_layout\n        if (c1 <= 0xBF) {\n            c1 = (c1 & 0x7F);\n            seqlen = 1;\n        }\n        else if (c1 <= 0xDF) {\n            c1 = (c1 & 0x1F);\n            seqlen = 2;\n        }\n        else if (c1 <= 0xEF) {\n            c1 = (c1 & 0x0F);\n            seqlen = 3;\n        }\n        else {\n            c1 = (c1 & 0x07);\n            seqlen = 4;\n        }\n        for (var ai = 1; ai < seqlen; ++ai) {\n            c1 = ((c1 << 0x06) | (strData.charCodeAt(ai + i) & 0x3F));\n        }\n        if (seqlen === 4) {\n            c1 -= 0x10000;\n            tmpArr.push(String.fromCharCode(0xD800 | ((c1 >> 10) & 0x3FF)));\n            tmpArr.push(String.fromCharCode(0xDC00 | (c1 & 0x3FF)));\n        }\n        else {\n            tmpArr.push(String.fromCharCode(c1));\n        }\n        i += seqlen;\n    }\n    return tmpArr.join('');\n}\nfunction base64Encode(data) {\n    // http://kevin.vanzonneveld.net\n    // +   original by: Tyler Akins (http://rumkin.com)\n    // +   improved by: Bayron Guevara\n    // +   improved by: Thunder.m\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +   bugfixed by: Pellentesque Malesuada\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // -    depends on: this.utf8Encode\n    // *     example 1: this.base64Encode('Kevin van Zonneveld')\n    // *     returns 1: 'S2V2aW4gdmFuIFpvbm5ldmVsZA=='\n    // mozilla has this native\n    // - but breaks in 2.0.0.12!\n    // if (typeof this.window['atob'] == 'function') {\n    //    return atob(data)\n    // }\n    var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    var o1, o2, o3, h1, h2, h3, h4, bits, i = 0, ac = 0, enc = '', tmp_arr = [];\n    if (!data) {\n        return data;\n    }\n    data = utf8Encode(data + '');\n    do {\n        // pack three octets into four hexets\n        o1 = data.charCodeAt(i++);\n        o2 = data.charCodeAt(i++);\n        o3 = data.charCodeAt(i++);\n        bits = (o1 << 16) | (o2 << 8) | o3;\n        h1 = (bits >> 18) & 0x3f;\n        h2 = (bits >> 12) & 0x3f;\n        h3 = (bits >> 6) & 0x3f;\n        h4 = bits & 0x3f;\n        // use hexets to index into b64, and append result to encoded string\n        tmp_arr[ac++] =\n            b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n    } while (i < data.length);\n    enc = tmp_arr.join('');\n    switch (data.length % 3) {\n        case 1:\n            enc = enc.slice(0, -2) + '==';\n            break;\n        case 2:\n            enc = enc.slice(0, -1) + '=';\n            break;\n    }\n    return enc;\n}\nfunction base64Decode(data) {\n    // http://kevin.vanzonneveld.net\n    // +   original by: Tyler Akins (http://rumkin.com)\n    // +   improved by: Thunder.m\n    // +      input by: Aman Gupta\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +   bugfixed by: Onno Marsman\n    // +   bugfixed by: Pellentesque Malesuada\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +      input by: Brett Zamir (http://brett-zamir.me)\n    // +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // *     example 1: base64_decode('S2V2aW4gdmFuIFpvbm5ldmVsZA==')\n    // *     returns 1: 'Kevin van Zonneveld'\n    // mozilla has this native\n    // - but breaks in 2.0.0.12!\n    // if (typeof this.window['atob'] == 'function') {\n    //    return atob(data)\n    // }\n    var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    var o1, o2, o3, h1, h2, h3, h4, bits, i = 0, ac = 0, dec = '', tmp_arr = [];\n    if (!data) {\n        return data;\n    }\n    data += '';\n    do { // unpack four hexets into three octets using index points in b64\n        h1 = b64.indexOf(data.charAt(i++));\n        h2 = b64.indexOf(data.charAt(i++));\n        h3 = b64.indexOf(data.charAt(i++));\n        h4 = b64.indexOf(data.charAt(i++));\n        bits = h1 << 18 | h2 << 12 | h3 << 6 | h4;\n        o1 = bits >> 16 & 0xff;\n        o2 = bits >> 8 & 0xff;\n        o3 = bits & 0xff;\n        if (h3 === 64) {\n            tmp_arr[ac++] = String.fromCharCode(o1);\n        }\n        else if (h4 === 64) {\n            tmp_arr[ac++] = String.fromCharCode(o1, o2);\n        }\n        else {\n            tmp_arr[ac++] = String.fromCharCode(o1, o2, o3);\n        }\n    } while (i < data.length);\n    dec = tmp_arr.join('');\n    return utf8Decode(dec);\n}\nexport function urlSafeBase64Encode(v) {\n    v = base64Encode(v);\n    // 参考 https://tools.ietf.org/html/rfc4648#section-5\n    return v.replace(/\\//g, '_').replace(/\\+/g, '-');\n}\nexport function urlSafeBase64Decode(v) {\n    v = v.replace(/_/g, '/').replace(/-/g, '+');\n    return base64Decode(v);\n}\n//# sourceMappingURL=base64.js.map","var _a;\n/** 上传区域 */\nexport var region = {\n    z0: 'z0',\n    z1: 'z1',\n    z2: 'z2',\n    na0: 'na0',\n    as0: 'as0',\n    cnEast2: 'cn-east-2'\n};\n/** 上传区域对应的 host */\nexport var regionUphostMap = (_a = {},\n    _a[region.z0] = {\n        srcUphost: ['up.qiniup.com'],\n        cdnUphost: ['upload.qiniup.com']\n    },\n    _a[region.z1] = {\n        srcUphost: ['up-z1.qiniup.com'],\n        cdnUphost: ['upload-z1.qiniup.com']\n    },\n    _a[region.z2] = {\n        srcUphost: ['up-z2.qiniup.com'],\n        cdnUphost: ['upload-z2.qiniup.com']\n    },\n    _a[region.na0] = {\n        srcUphost: ['up-na0.qiniup.com'],\n        cdnUphost: ['upload-na0.qiniup.com']\n    },\n    _a[region.as0] = {\n        srcUphost: ['up-as0.qiniup.com'],\n        cdnUphost: ['upload-as0.qiniup.com']\n    },\n    _a[region.cnEast2] = {\n        srcUphost: ['up-cn-east-2.qiniup.com'],\n        cdnUphost: ['upload-cn-east-2.qiniup.com']\n    },\n    _a);\n//# sourceMappingURL=region.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport SparkMD5 from 'spark-md5';\nimport { QiniuErrorName, QiniuError, QiniuRequestError, QiniuNetworkError } from '../errors';\nimport { urlSafeBase64Decode } from './base64';\nexport var MB = Math.pow(1024, 2);\n// 文件分块\nexport function getChunks(file, blockSize) {\n    var chunkByteSize = blockSize * MB; // 转换为字节\n    // 如果 chunkByteSize 比文件大，则直接取文件的大小\n    if (chunkByteSize > file.size) {\n        chunkByteSize = file.size;\n    }\n    else {\n        // 因为最多 10000 chunk，所以如果 chunkSize 不符合则把每片 chunk 大小扩大两倍\n        while (file.size > chunkByteSize * 10000) {\n            chunkByteSize *= 2;\n        }\n    }\n    var chunks = [];\n    var count = Math.ceil(file.size / chunkByteSize);\n    for (var i = 0; i < count; i++) {\n        var chunk = file.slice(chunkByteSize * i, i === count - 1 ? file.size : chunkByteSize * (i + 1));\n        chunks.push(chunk);\n    }\n    return chunks;\n}\nexport function isMetaDataValid(params) {\n    return Object.keys(params).every(function (key) { return key.indexOf('x-qn-meta-') === 0; });\n}\nexport function isCustomVarsValid(params) {\n    return Object.keys(params).every(function (key) { return key.indexOf('x:') === 0; });\n}\nexport function sum(list) {\n    return list.reduce(function (data, loaded) { return data + loaded; }, 0);\n}\nexport function setLocalFileInfo(localKey, info, logger) {\n    try {\n        localStorage.setItem(localKey, JSON.stringify(info));\n    }\n    catch (err) {\n        logger.warn(new QiniuError(QiniuErrorName.WriteCacheFailed, \"setLocalFileInfo failed: \" + localKey));\n    }\n}\nexport function createLocalKey(name, key, size) {\n    var localKey = key == null ? '_' : \"_key_\" + key + \"_\";\n    return \"qiniu_js_sdk_upload_file_name_\" + name + localKey + \"size_\" + size;\n}\nexport function removeLocalFileInfo(localKey, logger) {\n    try {\n        localStorage.removeItem(localKey);\n    }\n    catch (err) {\n        logger.warn(new QiniuError(QiniuErrorName.RemoveCacheFailed, \"removeLocalFileInfo failed. key: \" + localKey));\n    }\n}\nexport function getLocalFileInfo(localKey, logger) {\n    var localInfoString = null;\n    try {\n        localInfoString = localStorage.getItem(localKey);\n    }\n    catch (_a) {\n        logger.warn(new QiniuError(QiniuErrorName.ReadCacheFailed, \"getLocalFileInfo failed. key: \" + localKey));\n    }\n    if (localInfoString == null) {\n        return null;\n    }\n    var localInfo = null;\n    try {\n        localInfo = JSON.parse(localInfoString);\n    }\n    catch (_b) {\n        // 本地信息已被破坏，直接删除\n        removeLocalFileInfo(localKey, logger);\n        logger.warn(new QiniuError(QiniuErrorName.InvalidCacheData, \"getLocalFileInfo failed to parse. key: \" + localKey));\n    }\n    return localInfo;\n}\nexport function getAuthHeaders(token) {\n    var auth = 'UpToken ' + token;\n    return { Authorization: auth };\n}\nexport function getHeadersForChunkUpload(token) {\n    var header = getAuthHeaders(token);\n    return __assign({ 'content-type': 'application/octet-stream' }, header);\n}\nexport function getHeadersForMkFile(token) {\n    var header = getAuthHeaders(token);\n    return __assign({ 'content-type': 'application/json' }, header);\n}\nexport function createXHR() {\n    if (window.XMLHttpRequest) {\n        return new XMLHttpRequest();\n    }\n    if (window.ActiveXObject) {\n        return new window.ActiveXObject('Microsoft.XMLHTTP');\n    }\n    throw new QiniuError(QiniuErrorName.NotAvailableXMLHttpRequest, 'the current environment does not support.');\n}\nexport function computeMd5(data) {\n    return __awaiter(this, void 0, void 0, function () {\n        var buffer, spark;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, readAsArrayBuffer(data)];\n                case 1:\n                    buffer = _a.sent();\n                    spark = new SparkMD5.ArrayBuffer();\n                    spark.append(buffer);\n                    return [2 /*return*/, spark.end()];\n            }\n        });\n    });\n}\nexport function readAsArrayBuffer(data) {\n    return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        // evt 类型目前存在问题 https://github.com/Microsoft/TypeScript/issues/4163\n        reader.onload = function (evt) {\n            if (evt.target) {\n                var body = evt.target.result;\n                resolve(body);\n            }\n            else {\n                reject(new QiniuError(QiniuErrorName.InvalidProgressEventTarget, 'progress event target is undefined'));\n            }\n        };\n        reader.onerror = function () {\n            reject(new QiniuError(QiniuErrorName.FileReaderReadFailed, 'fileReader read failed'));\n        };\n        reader.readAsArrayBuffer(data);\n    });\n}\nexport function request(url, options) {\n    return new Promise(function (resolve, reject) {\n        var xhr = createXHR();\n        xhr.open(options.method, url);\n        if (options.onCreate) {\n            options.onCreate(xhr);\n        }\n        if (options.headers) {\n            var headers_1 = options.headers;\n            Object.keys(headers_1).forEach(function (k) {\n                xhr.setRequestHeader(k, headers_1[k]);\n            });\n        }\n        xhr.upload.addEventListener('progress', function (evt) {\n            if (evt.lengthComputable && options.onProgress) {\n                options.onProgress({\n                    loaded: evt.loaded,\n                    total: evt.total\n                });\n            }\n        });\n        xhr.onreadystatechange = function () {\n            var responseText = xhr.responseText;\n            if (xhr.readyState !== 4) {\n                return;\n            }\n            var reqId = xhr.getResponseHeader('x-reqId') || '';\n            if (xhr.status === 0) {\n                // 发生 0 基本都是网络错误，常见的比如跨域、断网、host 解析失败、系统拦截等等\n                reject(new QiniuNetworkError('network error.', reqId));\n                return;\n            }\n            if (xhr.status !== 200) {\n                var message = \"xhr request failed, code: \" + xhr.status;\n                if (responseText) {\n                    message += \" response: \" + responseText;\n                }\n                var data = void 0;\n                try {\n                    data = JSON.parse(responseText);\n                }\n                catch (_a) {\n                    // 无需处理该错误、可能拿到非 json 格式的响应是预期的\n                }\n                reject(new QiniuRequestError(xhr.status, reqId, message, data));\n                return;\n            }\n            try {\n                resolve({\n                    data: JSON.parse(responseText),\n                    reqId: reqId\n                });\n            }\n            catch (err) {\n                reject(err);\n            }\n        };\n        xhr.send(options.body);\n    });\n}\nexport function getPortFromUrl(url) {\n    if (url && url.match) {\n        var groups = url.match(/(^https?)/);\n        if (!groups) {\n            return '';\n        }\n        var type = groups[1];\n        groups = url.match(/^https?:\\/\\/([^:^/]*):(\\d*)/);\n        if (groups) {\n            return groups[2];\n        }\n        if (type === 'http') {\n            return '80';\n        }\n        return '443';\n    }\n    return '';\n}\nexport function getDomainFromUrl(url) {\n    if (url && url.match) {\n        var groups = url.match(/^https?:\\/\\/([^:^/]*)/);\n        return groups ? groups[1] : '';\n    }\n    return '';\n}\nexport function getPutPolicy(token) {\n    if (!token)\n        throw new QiniuError(QiniuErrorName.InvalidToken, 'invalid token.');\n    var segments = token.split(':');\n    if (segments.length === 1)\n        throw new QiniuError(QiniuErrorName.InvalidToken, 'invalid token segments.');\n    // token 构造的差异参考：https://github.com/qbox/product/blob/master/kodo/auths/UpToken.md#admin-uptoken-authorization\n    var assessKey = segments.length > 3 ? segments[1] : segments[0];\n    if (!assessKey)\n        throw new QiniuError(QiniuErrorName.InvalidToken, 'missing assess key field.');\n    var putPolicy = null;\n    try {\n        putPolicy = JSON.parse(urlSafeBase64Decode(segments[segments.length - 1]));\n    }\n    catch (error) {\n        throw new QiniuError(QiniuErrorName.InvalidToken, 'token parse failed.');\n    }\n    if (putPolicy == null) {\n        throw new QiniuError(QiniuErrorName.InvalidToken, 'putPolicy is null.');\n    }\n    if (putPolicy.scope == null) {\n        throw new QiniuError(QiniuErrorName.InvalidToken, 'scope field is null.');\n    }\n    var bucketName = putPolicy.scope.split(':')[0];\n    if (!bucketName) {\n        throw new QiniuError(QiniuErrorName.InvalidToken, 'resolve bucketName failed.');\n    }\n    return { assessKey: assessKey, bucketName: bucketName, scope: putPolicy.scope };\n}\nexport function createObjectURL(file) {\n    var URL = window.URL || window.webkitURL || window.mozURL;\n    // FIXME:  需要 revokeObjectURL\n    return URL.createObjectURL(file);\n}\n//# sourceMappingURL=helper.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { stringify } from 'querystring';\nimport { normalizeUploadConfig } from '../utils';\nimport * as utils from '../utils';\nexport function getUpHosts(accessKey, bucketName, protocol) {\n    return __awaiter(this, void 0, void 0, function () {\n        var params, url;\n        return __generator(this, function (_a) {\n            params = stringify({ ak: accessKey, bucket: bucketName });\n            url = protocol + \"://api.qiniu.com/v2/query?\" + params;\n            return [2 /*return*/, utils.request(url, { method: 'GET' })];\n        });\n    });\n}\n/**\n * @param bucket 空间名\n * @param key 目标文件名\n * @param uploadInfo 上传信息\n */\nfunction getBaseUrl(bucket, key, uploadInfo) {\n    var url = uploadInfo.url, id = uploadInfo.id;\n    return url + \"/buckets/\" + bucket + \"/objects/\" + (key != null ? utils.urlSafeBase64Encode(key) : '~') + \"/uploads/\" + id;\n}\n/**\n * @param token 上传鉴权凭证\n * @param bucket 上传空间\n * @param key 目标文件名\n * @param uploadUrl 上传地址\n */\nexport function initUploadParts(token, bucket, key, uploadUrl) {\n    var url = uploadUrl + \"/buckets/\" + bucket + \"/objects/\" + (key != null ? utils.urlSafeBase64Encode(key) : '~') + \"/uploads\";\n    return utils.request(url, {\n        method: 'POST',\n        headers: utils.getAuthHeaders(token)\n    });\n}\n/**\n * @param token 上传鉴权凭证\n * @param index 当前 chunk 的索引\n * @param uploadInfo 上传信息\n * @param options 请求参数\n */\nexport function uploadChunk(token, key, index, uploadInfo, options) {\n    var bucket = utils.getPutPolicy(token).bucketName;\n    var url = getBaseUrl(bucket, key, uploadInfo) + (\"/\" + index);\n    var headers = utils.getHeadersForChunkUpload(token);\n    if (options.md5)\n        headers['Content-MD5'] = options.md5;\n    return utils.request(url, __assign(__assign({}, options), { method: 'PUT', headers: headers }));\n}\n/**\n * @param token 上传鉴权凭证\n * @param key 目标文件名\n * @param uploadInfo 上传信息\n * @param options 请求参数\n */\nexport function uploadComplete(token, key, uploadInfo, options) {\n    var bucket = utils.getPutPolicy(token).bucketName;\n    var url = getBaseUrl(bucket, key, uploadInfo);\n    return utils.request(url, __assign(__assign({}, options), { method: 'POST', headers: utils.getHeadersForMkFile(token) }));\n}\n/**\n * @param token 上传鉴权凭证\n * @param key 目标文件名\n * @param uploadInfo 上传信息\n */\nexport function deleteUploadedChunks(token, key, uploadinfo) {\n    var bucket = utils.getPutPolicy(token).bucketName;\n    var url = getBaseUrl(bucket, key, uploadinfo);\n    return utils.request(url, {\n        method: 'DELETE',\n        headers: utils.getAuthHeaders(token)\n    });\n}\n/**\n * @param  {string} url\n * @param  {FormData} data\n * @param  {Partial<utils.RequestOptions>} options\n * @returns Promise\n * @description 直传接口\n */\nexport function direct(url, data, options) {\n    return utils.request(url, __assign({ method: 'POST', body: data }, options));\n}\n/**\n * @param  {UploadUrlConfig} config\n * @param  {string} token\n * @returns Promise\n * @description 获取上传 url\n */\nexport function getUploadUrl(_config, token) {\n    return __awaiter(this, void 0, void 0, function () {\n        var config, protocol, putPolicy, res, hosts;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    config = normalizeUploadConfig(_config);\n                    protocol = config.upprotocol;\n                    if (config.uphost.length > 0) {\n                        return [2 /*return*/, protocol + \"://\" + config.uphost[0]];\n                    }\n                    putPolicy = utils.getPutPolicy(token);\n                    return [4 /*yield*/, getUpHosts(putPolicy.assessKey, putPolicy.bucketName, protocol)];\n                case 1:\n                    res = _a.sent();\n                    hosts = res.data.up.acc.main;\n                    return [2 /*return*/, protocol + \"://\" + hosts[0]];\n            }\n        });\n    });\n}\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nimport { QiniuErrorName, QiniuError, QiniuRequestError } from '../errors';\nimport * as utils from '../utils';\nexport var DEFAULT_CHUNK_SIZE = 4; // 单位 MB\n// code 信息地址 https://developer.qiniu.com/kodo/3928/error-responses\nexport var FREEZE_CODE_LIST = [0, 502, 503, 504, 599]; // 将会冻结当前 host 的 code\nexport var RETRY_CODE_LIST = __spread(FREEZE_CODE_LIST, [612]); // 会进行重试的 code\nvar GB = Math.pow(1024, 3);\nvar Base = /** @class */ (function () {\n    function Base(options, handlers, hostPool, logger) {\n        this.hostPool = hostPool;\n        this.logger = logger;\n        this.aborted = false;\n        this.retryCount = 0;\n        this.xhrList = [];\n        this.config = options.config;\n        logger.info('config inited.', this.config);\n        this.putExtra = __assign({ fname: '' }, options.putExtra);\n        logger.info('putExtra inited.', this.putExtra);\n        this.key = options.key;\n        this.file = options.file;\n        this.token = options.token;\n        this.onData = handlers.onData;\n        this.onError = handlers.onError;\n        this.onComplete = handlers.onComplete;\n        try {\n            var putPolicy = utils.getPutPolicy(this.token);\n            this.bucketName = putPolicy.bucketName;\n            this.assessKey = putPolicy.assessKey;\n        }\n        catch (error) {\n            logger.error('get putPolicy from token failed.', error);\n            this.onError(error);\n        }\n    }\n    // 检查并更新 upload host\n    Base.prototype.checkAndUpdateUploadHost = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var newHost;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        // 从 hostPool 中获取一个可用的 host 挂载在 this\n                        this.logger.info('get available upload host.');\n                        return [4 /*yield*/, this.hostPool.getUp(this.assessKey, this.bucketName, this.config.upprotocol)];\n                    case 1:\n                        newHost = _a.sent();\n                        if (newHost == null) {\n                            throw new QiniuError(QiniuErrorName.NotAvailableUploadHost, 'no available upload host.');\n                        }\n                        if (this.uploadHost != null && this.uploadHost.host !== newHost.host) {\n                            this.logger.warn(\"host switches from \" + this.uploadHost.host + \" to \" + newHost.host + \".\");\n                        }\n                        else {\n                            this.logger.info(\"use host \" + newHost.host + \".\");\n                        }\n                        this.uploadHost = newHost;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    // 检查并解冻当前的 host\n    Base.prototype.checkAndUnfreezeHost = function () {\n        this.logger.info('check unfreeze host.');\n        if (this.uploadHost != null && this.uploadHost.isFrozen()) {\n            this.logger.warn(this.uploadHost.host + \" will be unfrozen.\");\n            this.uploadHost.unfreeze();\n        }\n    };\n    // 检查并更新冻结当前的 host\n    Base.prototype.checkAndFreezeHost = function (error) {\n        this.logger.info('check freeze host.');\n        if (error instanceof QiniuRequestError && this.uploadHost != null) {\n            if (FREEZE_CODE_LIST.includes(error.code)) {\n                this.logger.warn(this.uploadHost.host + \" will be temporarily frozen.\");\n                this.uploadHost.freeze();\n            }\n        }\n    };\n    Base.prototype.handleError = function (error) {\n        this.logger.error(error.message);\n        this.onError(error);\n    };\n    /**\n     * @returns Promise 返回结果与上传最终状态无关，状态信息请通过 [Subscriber] 获取。\n     * @description 上传文件，状态信息请通过 [Subscriber] 获取。\n     */\n    Base.prototype.putFile = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var result, err_1, reqId, code, notReachRetryCount, needRetry;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.aborted = false;\n                        if (!this.putExtra.fname) {\n                            this.logger.info('use file.name as fname.');\n                            this.putExtra.fname = this.file.name;\n                        }\n                        if (this.file.size > 10000 * GB) {\n                            this.handleError(new QiniuError(QiniuErrorName.InvalidFile, 'file size exceed maximum value 10000G'));\n                            return [2 /*return*/];\n                        }\n                        if (this.putExtra.customVars) {\n                            if (!utils.isCustomVarsValid(this.putExtra.customVars)) {\n                                this.handleError(new QiniuError(QiniuErrorName.InvalidCustomVars, \n                                // FIXME: width => with\n                                'customVars key should start width x:'));\n                                return [2 /*return*/];\n                            }\n                        }\n                        if (this.putExtra.metadata) {\n                            if (!utils.isMetaDataValid(this.putExtra.metadata)) {\n                                this.handleError(new QiniuError(QiniuErrorName.InvalidMetadata, 'metadata key should start with x-qn-meta-'));\n                                return [2 /*return*/];\n                            }\n                        }\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 4, , 5]);\n                        this.uploadAt = new Date().getTime();\n                        return [4 /*yield*/, this.checkAndUpdateUploadHost()];\n                    case 2:\n                        _a.sent();\n                        return [4 /*yield*/, this.run()];\n                    case 3:\n                        result = _a.sent();\n                        this.onComplete(result.data);\n                        this.checkAndUnfreezeHost();\n                        this.sendLog(result.reqId, 200);\n                        return [2 /*return*/];\n                    case 4:\n                        err_1 = _a.sent();\n                        this.logger.error(err_1);\n                        this.clear();\n                        if (err_1 instanceof QiniuRequestError) {\n                            reqId = this.aborted ? '' : err_1.reqId;\n                            code = this.aborted ? -2 : err_1.code;\n                            this.sendLog(reqId, code);\n                            // 检查并冻结当前的 host\n                            this.checkAndFreezeHost(err_1);\n                            notReachRetryCount = ++this.retryCount <= this.config.retryCount;\n                            needRetry = !this.aborted && RETRY_CODE_LIST.includes(err_1.code);\n                            // 以下条件满足其中之一则会进行重新上传：\n                            // 1. 满足 needRetry 的条件且 retryCount 不为 0\n                            // 2. uploadId 无效时在 resume 里会清除本地数据，并且这里触发重新上传\n                            if (needRetry && notReachRetryCount) {\n                                this.logger.warn(\"error auto retry: \" + this.retryCount + \"/\" + this.config.retryCount + \".\");\n                                this.putFile();\n                                return [2 /*return*/];\n                            }\n                        }\n                        this.onError(err_1);\n                        return [3 /*break*/, 5];\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Base.prototype.clear = function () {\n        this.logger.info('start cleaning all xhr.');\n        this.xhrList.forEach(function (xhr) {\n            xhr.onreadystatechange = null;\n            xhr.abort();\n        });\n        this.logger.info('cleanup completed.');\n        this.xhrList = [];\n    };\n    Base.prototype.stop = function () {\n        this.logger.info('stop.');\n        this.clear();\n        this.aborted = true;\n    };\n    Base.prototype.addXhr = function (xhr) {\n        this.xhrList.push(xhr);\n    };\n    Base.prototype.sendLog = function (reqId, code) {\n        var _a, _b;\n        this.logger.report({\n            code: code,\n            reqId: reqId,\n            remoteIp: '',\n            upType: 'jssdk-h5',\n            size: this.file.size,\n            time: Math.floor(this.uploadAt / 1000),\n            port: utils.getPortFromUrl((_a = this.uploadHost) === null || _a === void 0 ? void 0 : _a.getUrl()),\n            host: utils.getDomainFromUrl((_b = this.uploadHost) === null || _b === void 0 ? void 0 : _b.getUrl()),\n            bytesSent: this.progress ? this.progress.total.loaded : 0,\n            duration: Math.floor((new Date().getTime() - this.uploadAt) / 1000)\n        });\n    };\n    Base.prototype.getProgressInfoItem = function (loaded, size, fromCache) {\n        return __assign({ size: size,\n            loaded: loaded, percent: loaded / size * 100 }, (fromCache == null ? {} : { fromCache: fromCache }));\n    };\n    return Base;\n}());\nexport default Base;\n//# sourceMappingURL=base.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { uploadChunk, uploadComplete, initUploadParts } from '../api';\nimport { QiniuError, QiniuErrorName, QiniuRequestError } from '../errors';\nimport * as utils from '../utils';\nimport Base from './base';\n/** 是否为正整数 */\nfunction isPositiveInteger(n) {\n    var re = /^[1-9]\\d*$/;\n    return re.test(String(n));\n}\nvar Resume = /** @class */ (function (_super) {\n    __extends(Resume, _super);\n    function Resume() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @returns  {Promise<ResponseSuccess<any>>}\n     * @description 实现了 Base 的 run 接口，处理具体的分片上传事务，并抛出过程中的异常。\n     */\n    Resume.prototype.run = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var pool, mkFileResponse, localKey, uploadChunks, error_1;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.logger.info('start run Resume.');\n                        if (!this.config.chunkSize || !isPositiveInteger(this.config.chunkSize)) {\n                            throw new QiniuError(QiniuErrorName.InvalidChunkSize, 'chunkSize must be a positive integer');\n                        }\n                        if (this.config.chunkSize > 1024) {\n                            throw new QiniuError(QiniuErrorName.InvalidChunkSize, 'chunkSize maximum value is 1024');\n                        }\n                        return [4 /*yield*/, this.initBeforeUploadChunks()];\n                    case 1:\n                        _a.sent();\n                        pool = new utils.Pool(function (chunkInfo) { return _this.uploadChunk(chunkInfo); }, this.config.concurrentRequestLimit);\n                        mkFileResponse = null;\n                        localKey = this.getLocalKey();\n                        uploadChunks = this.chunks.map(function (chunk, index) { return pool.enqueue({ chunk: chunk, index: index }); });\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 5, , 6]);\n                        return [4 /*yield*/, Promise.all(uploadChunks)];\n                    case 3:\n                        _a.sent();\n                        return [4 /*yield*/, this.mkFileReq()];\n                    case 4:\n                        mkFileResponse = _a.sent();\n                        return [3 /*break*/, 6];\n                    case 5:\n                        error_1 = _a.sent();\n                        // uploadId 无效，上传参数有误（多由于本地存储信息的 uploadId 失效）\n                        if (error_1 instanceof QiniuRequestError && (error_1.code === 612 || error_1.code === 400)) {\n                            utils.removeLocalFileInfo(localKey, this.logger);\n                        }\n                        throw error_1;\n                    case 6:\n                        // 上传成功，清理本地缓存数据\n                        utils.removeLocalFileInfo(localKey, this.logger);\n                        return [2 /*return*/, mkFileResponse];\n                }\n            });\n        });\n    };\n    Resume.prototype.uploadChunk = function (chunkInfo) {\n        return __awaiter(this, void 0, void 0, function () {\n            var index, chunk, cachedInfo, shouldCheckMD5, reuseSaved, md5, onProgress, requestOptions, response;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        index = chunkInfo.index, chunk = chunkInfo.chunk;\n                        cachedInfo = this.cachedUploadedList[index];\n                        this.logger.info(\"upload part \" + index + \", cache:\", cachedInfo);\n                        shouldCheckMD5 = this.config.checkByMD5;\n                        reuseSaved = function () {\n                            _this.usedCacheList[index] = true;\n                            _this.updateChunkProgress(chunk.size, index);\n                            _this.uploadedList[index] = cachedInfo;\n                            _this.updateLocalCache();\n                        };\n                        // FIXME: 至少判断一下 size\n                        if (cachedInfo && !shouldCheckMD5) {\n                            reuseSaved();\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, utils.computeMd5(chunk)];\n                    case 1:\n                        md5 = _a.sent();\n                        this.logger.info('computed part md5.', md5);\n                        if (cachedInfo && md5 === cachedInfo.md5) {\n                            reuseSaved();\n                            return [2 /*return*/];\n                        }\n                        // 没有使用缓存设置标记为 false\n                        this.usedCacheList[index] = false;\n                        onProgress = function (data) {\n                            _this.updateChunkProgress(data.loaded, index);\n                        };\n                        requestOptions = {\n                            body: chunk,\n                            md5: this.config.checkByServer ? md5 : undefined,\n                            onProgress: onProgress,\n                            onCreate: function (xhr) { return _this.addXhr(xhr); }\n                        };\n                        this.logger.info(\"part \" + index + \" start uploading.\");\n                        return [4 /*yield*/, uploadChunk(this.token, this.key, chunkInfo.index + 1, this.getUploadInfo(), requestOptions)];\n                    case 2:\n                        response = _a.sent();\n                        this.logger.info(\"part \" + index + \" upload completed.\");\n                        // 在某些浏览器环境下，xhr 的 progress 事件无法被触发，progress 为 null，这里在每次分片上传完成后都手动更新下 progress\n                        onProgress({\n                            loaded: chunk.size,\n                            total: chunk.size\n                        });\n                        this.uploadedList[index] = {\n                            etag: response.data.etag,\n                            md5: response.data.md5,\n                            size: chunk.size\n                        };\n                        this.updateLocalCache();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Resume.prototype.mkFileReq = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var data, result;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        data = __assign(__assign(__assign({ parts: this.uploadedList.map(function (value, index) { return ({\n                                etag: value.etag,\n                                // 接口要求 index 需要从 1 开始，所以需要整体 + 1\n                                partNumber: index + 1\n                            }); }), fname: this.putExtra.fname }, this.putExtra.mimeType && { mimeType: this.putExtra.mimeType }), this.putExtra.customVars && { customVars: this.putExtra.customVars }), this.putExtra.metadata && { metadata: this.putExtra.metadata });\n                        this.logger.info('parts upload completed, make file.', data);\n                        return [4 /*yield*/, uploadComplete(this.token, this.key, this.getUploadInfo(), {\n                                onCreate: function (xhr) { return _this.addXhr(xhr); },\n                                body: JSON.stringify(data)\n                            })];\n                    case 1:\n                        result = _a.sent();\n                        this.logger.info('finish Resume Progress.');\n                        this.updateMkFileProgress(1);\n                        return [2 /*return*/, result];\n                }\n            });\n        });\n    };\n    Resume.prototype.initBeforeUploadChunks = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var cachedInfo, res, infoMessage;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.uploadedList = [];\n                        this.usedCacheList = [];\n                        cachedInfo = utils.getLocalFileInfo(this.getLocalKey(), this.logger);\n                        if (!!cachedInfo) return [3 /*break*/, 2];\n                        this.logger.info('init upload parts from api.');\n                        return [4 /*yield*/, initUploadParts(this.token, this.bucketName, this.key, this.uploadHost.getUrl())];\n                    case 1:\n                        res = _a.sent();\n                        this.logger.info(\"initd upload parts of id: \" + res.data.uploadId + \".\");\n                        this.uploadId = res.data.uploadId;\n                        this.cachedUploadedList = [];\n                        return [3 /*break*/, 3];\n                    case 2:\n                        infoMessage = [\n                            'resume upload parts from local cache,',\n                            \"total \" + cachedInfo.data.length + \" part,\",\n                            \"id is \" + cachedInfo.id + \".\"\n                        ];\n                        this.logger.info(infoMessage.join(' '));\n                        this.cachedUploadedList = cachedInfo.data;\n                        this.uploadId = cachedInfo.id;\n                        _a.label = 3;\n                    case 3:\n                        this.chunks = utils.getChunks(this.file, this.config.chunkSize);\n                        this.loaded = {\n                            mkFileProgress: 0,\n                            chunks: this.chunks.map(function (_) { return 0; })\n                        };\n                        this.notifyResumeProgress();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Resume.prototype.getUploadInfo = function () {\n        return {\n            id: this.uploadId,\n            url: this.uploadHost.getUrl()\n        };\n    };\n    Resume.prototype.getLocalKey = function () {\n        return utils.createLocalKey(this.file.name, this.key, this.file.size);\n    };\n    Resume.prototype.updateLocalCache = function () {\n        utils.setLocalFileInfo(this.getLocalKey(), {\n            id: this.uploadId,\n            data: this.uploadedList\n        }, this.logger);\n    };\n    Resume.prototype.updateChunkProgress = function (loaded, index) {\n        this.loaded.chunks[index] = loaded;\n        this.notifyResumeProgress();\n    };\n    Resume.prototype.updateMkFileProgress = function (progress) {\n        this.loaded.mkFileProgress = progress;\n        this.notifyResumeProgress();\n    };\n    Resume.prototype.notifyResumeProgress = function () {\n        var _this = this;\n        this.progress = {\n            total: this.getProgressInfoItem(utils.sum(this.loaded.chunks) + this.loaded.mkFileProgress, \n            // FIXME: 不准确的 fileSize\n            this.file.size + 1 // 防止在 complete 未调用的时候进度显示 100%\n            ),\n            chunks: this.chunks.map(function (chunk, index) {\n                var fromCache = _this.usedCacheList[index];\n                return _this.getProgressInfoItem(_this.loaded.chunks[index], chunk.size, fromCache);\n            }),\n            uploadInfo: {\n                id: this.uploadId,\n                url: this.uploadHost.getUrl()\n            }\n        };\n        this.onData(this.progress);\n    };\n    return Resume;\n}(Base));\nexport default Resume;\n//# sourceMappingURL=resume.js.map","/* eslint-disable no-bitwise */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { MB } from './helper';\n/**\n * 以下 class 实现参考\n * https://github.com/Stuk/jszip/blob/d4702a70834bd953d4c2d0bc155fad795076631a/lib/crc32.js\n * 该实现主要针对大文件优化、对计算的值进行了 `>>> 0` 运算（为与服务端保持一致）\n */\nvar CRC32 = /** @class */ (function () {\n    function CRC32() {\n        this.crc = -1;\n        this.table = this.makeTable();\n    }\n    CRC32.prototype.makeTable = function () {\n        var table = new Array();\n        for (var i = 0; i < 256; i++) {\n            var t = i;\n            for (var j = 0; j < 8; j++) {\n                if (t & 1) {\n                    // IEEE 标准\n                    t = (t >>> 1) ^ 0xEDB88320;\n                }\n                else {\n                    t >>>= 1;\n                }\n            }\n            table[i] = t;\n        }\n        return table;\n    };\n    CRC32.prototype.append = function (data) {\n        var crc = this.crc;\n        for (var offset = 0; offset < data.byteLength; offset++) {\n            crc = (crc >>> 8) ^ this.table[(crc ^ data[offset]) & 0xFF];\n        }\n        this.crc = crc;\n    };\n    CRC32.prototype.compute = function () {\n        return (this.crc ^ -1) >>> 0;\n    };\n    CRC32.prototype.readAsUint8Array = function (file) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!(typeof file.arrayBuffer === 'function')) return [3 /*break*/, 2];\n                        _a = Uint8Array.bind;\n                        return [4 /*yield*/, file.arrayBuffer()];\n                    case 1: return [2 /*return*/, new (_a.apply(Uint8Array, [void 0, _b.sent()]))()];\n                    case 2: return [2 /*return*/, new Promise(function (resolve, reject) {\n                            var reader = new FileReader();\n                            reader.onload = function () {\n                                if (reader.result == null) {\n                                    reject();\n                                    return;\n                                }\n                                if (typeof reader.result === 'string') {\n                                    reject();\n                                    return;\n                                }\n                                resolve(new Uint8Array(reader.result));\n                            };\n                            reader.readAsArrayBuffer(file);\n                        })];\n                }\n            });\n        });\n    };\n    CRC32.prototype.file = function (file) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, count, index, start, end, chuck;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!(file.size <= MB)) return [3 /*break*/, 2];\n                        _a = this.append;\n                        return [4 /*yield*/, this.readAsUint8Array(file)];\n                    case 1:\n                        _a.apply(this, [_b.sent()]);\n                        return [2 /*return*/, this.compute()];\n                    case 2:\n                        count = Math.ceil(file.size / MB);\n                        index = 0;\n                        _b.label = 3;\n                    case 3:\n                        if (!(index < count)) return [3 /*break*/, 6];\n                        start = index * MB;\n                        end = index === (count - 1) ? file.size : start + MB;\n                        return [4 /*yield*/, this.readAsUint8Array(file.slice(start, end))];\n                    case 4:\n                        chuck = _b.sent();\n                        this.append(new Uint8Array(chuck));\n                        _b.label = 5;\n                    case 5:\n                        index++;\n                        return [3 /*break*/, 3];\n                    case 6: return [2 /*return*/, this.compute()];\n                }\n            });\n        });\n    };\n    CRC32.file = function (file) {\n        var crc = new CRC32();\n        return crc.file(file);\n    };\n    return CRC32;\n}());\nexport { CRC32 };\n//# sourceMappingURL=crc32.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { CRC32 } from '../utils/crc32';\nimport { direct } from '../api';\nimport Base from './base';\nvar Direct = /** @class */ (function (_super) {\n    __extends(Direct, _super);\n    function Direct() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Direct.prototype.run = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var formData, crcSign, customVars_1, result;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.logger.info('start run Direct.');\n                        formData = new FormData();\n                        formData.append('file', this.file);\n                        formData.append('token', this.token);\n                        if (this.key != null) {\n                            formData.append('key', this.key);\n                        }\n                        formData.append('fname', this.putExtra.fname);\n                        if (!this.config.checkByServer) return [3 /*break*/, 2];\n                        return [4 /*yield*/, CRC32.file(this.file)];\n                    case 1:\n                        crcSign = _a.sent();\n                        formData.append('crc32', crcSign.toString());\n                        _a.label = 2;\n                    case 2:\n                        if (this.putExtra.customVars) {\n                            this.logger.info('init customVars.');\n                            customVars_1 = this.putExtra.customVars;\n                            Object.keys(customVars_1).forEach(function (key) { return formData.append(key, customVars_1[key].toString()); });\n                            this.logger.info('customVars inited.');\n                        }\n                        this.logger.info('formData inited.');\n                        return [4 /*yield*/, direct(this.uploadHost.getUrl(), formData, {\n                                onProgress: function (data) {\n                                    _this.updateDirectProgress(data.loaded, data.total);\n                                },\n                                onCreate: function (xhr) { return _this.addXhr(xhr); }\n                            })];\n                    case 3:\n                        result = _a.sent();\n                        this.logger.info('Direct progress finish.');\n                        this.finishDirectProgress();\n                        return [2 /*return*/, result];\n                }\n            });\n        });\n    };\n    Direct.prototype.updateDirectProgress = function (loaded, total) {\n        // 当请求未完成时可能进度会达到100，所以total + 1来防止这种情况出现\n        this.progress = { total: this.getProgressInfoItem(loaded, total + 1) };\n        this.onData(this.progress);\n    };\n    Direct.prototype.finishDirectProgress = function () {\n        // 在某些浏览器环境下，xhr 的 progress 事件无法被触发，progress 为 null，这里 fake 下\n        if (!this.progress) {\n            this.logger.warn('progress is null.');\n            this.progress = { total: this.getProgressInfoItem(this.file.size, this.file.size) };\n            this.onData(this.progress);\n            return;\n        }\n        var total = this.progress.total;\n        this.progress = { total: this.getProgressInfoItem(total.loaded + 1, total.size) };\n        this.onData(this.progress);\n    };\n    return Direct;\n}(Base));\nexport default Direct;\n//# sourceMappingURL=direct.js.map","import { createXHR, getAuthHeaders } from '../utils';\n/**\n * @param  {string} token 上传使用的 token\n * @param  {V3LogInfo} data 上报的统计数据\n * @param  {number} retry 重试的次数，默认值 3\n * @description v3 版本的日志上传接口，参考文档 https://github.com/qbox/product/blob/master/kodo/uplog.md#%E7%89%88%E6%9C%AC-3。\n */\nexport function reportV3(token, data, retry) {\n    if (retry === void 0) { retry = 3; }\n    var xhr = createXHR();\n    xhr.open('POST', 'https://uplog.qbox.me/log/3');\n    xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n    xhr.setRequestHeader('Authorization', getAuthHeaders(token).Authorization);\n    xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4 && xhr.status !== 200 && retry > 0) {\n            reportV3(token, data, retry - 1);\n        }\n    };\n    // 顺序参考：https://github.com/qbox/product/blob/master/kodo/uplog.md#%E7%89%88%E6%9C%AC-3\n    var stringifyData = [\n        data.code || '',\n        data.reqId || '',\n        data.host || '',\n        data.remoteIp || '',\n        data.port || '',\n        data.duration || '',\n        data.time || '',\n        data.bytesSent || '',\n        data.upType || '',\n        data.size || ''\n    ].join(',');\n    xhr.send(stringifyData);\n}\n//# sourceMappingURL=report-v3.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nimport { reportV3 } from './report-v3';\nvar Logger = /** @class */ (function () {\n    function Logger(token, disableReport, level, prefix) {\n        if (disableReport === void 0) { disableReport = true; }\n        if (level === void 0) { level = 'OFF'; }\n        if (prefix === void 0) { prefix = 'UPLOAD'; }\n        this.token = token;\n        this.disableReport = disableReport;\n        this.level = level;\n        this.prefix = prefix;\n        // 为每个类分配一个 id\n        // 用以区分不同的上传任务\n        this.id = ++Logger.id;\n    }\n    Logger.prototype.getPrintPrefix = function (level) {\n        return \"Qiniu-JS-SDK [\" + level + \"][\" + this.prefix + \"#\" + this.id + \"]:\";\n    };\n    /**\n     * @param  {V3LogInfo} data 上报的数据。\n     * @param  {boolean} retry 重试次数，可选，默认为 3。\n     * @description 向服务端上报统计信息。\n     */\n    Logger.prototype.report = function (data, retry) {\n        if (this.disableReport)\n            return;\n        try {\n            reportV3(this.token, data, retry);\n        }\n        catch (error) {\n            this.warn(error);\n        }\n    };\n    /**\n     * @param  {unknown[]} ...args\n     * @description 输出 info 级别的调试信息。\n     */\n    Logger.prototype.info = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var allowLevel = ['INFO'];\n        if (allowLevel.includes(this.level)) {\n            // eslint-disable-next-line no-console\n            console.log.apply(console, __spread([this.getPrintPrefix('INFO')], args));\n        }\n    };\n    /**\n     * @param  {unknown[]} ...args\n     * @description 输出 warn 级别的调试信息。\n     */\n    Logger.prototype.warn = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var allowLevel = ['INFO', 'WARN'];\n        if (allowLevel.includes(this.level)) {\n            // eslint-disable-next-line no-console\n            console.warn.apply(console, __spread([this.getPrintPrefix('WARN')], args));\n        }\n    };\n    /**\n     * @param  {unknown[]} ...args\n     * @description 输出 error 级别的调试信息。\n     */\n    Logger.prototype.error = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var allowLevel = ['INFO', 'WARN', 'ERROR'];\n        if (allowLevel.includes(this.level)) {\n            // eslint-disable-next-line no-console\n            console.error.apply(console, __spread([this.getPrintPrefix('ERROR')], args));\n        }\n    };\n    Logger.id = 0;\n    return Logger;\n}());\nexport default Logger;\n//# sourceMappingURL=index.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nimport { getUpHosts } from '../api';\n/**\n  * @description 解冻时间，key 是 host，value 为解冻时间\n  */\nvar unfreezeTimeMap = new Map();\nvar Host = /** @class */ (function () {\n    function Host(host, protocol) {\n        this.host = host;\n        this.protocol = protocol;\n    }\n    /**\n     * @description 当前 host 是否为冻结状态\n     */\n    Host.prototype.isFrozen = function () {\n        var currentTime = new Date().getTime();\n        var unfreezeTime = unfreezeTimeMap.get(this.host);\n        return unfreezeTime != null && unfreezeTime >= currentTime;\n    };\n    /**\n     * @param  {number} time 单位秒，默认 20s\n     * @description 冻结该 host 对象，该 host 将在指定时间内不可用\n     */\n    Host.prototype.freeze = function (time) {\n        if (time === void 0) { time = 20; }\n        var unfreezeTime = new Date().getTime() + (time * 1000);\n        unfreezeTimeMap.set(this.host, unfreezeTime);\n    };\n    /**\n     * @description 解冻该 host\n     */\n    Host.prototype.unfreeze = function () {\n        unfreezeTimeMap[\"delete\"](this.host);\n    };\n    /**\n     * @description 获取当前 host 的完整 url\n     */\n    Host.prototype.getUrl = function () {\n        return this.protocol + \"://\" + this.host;\n    };\n    /**\n     * @description 获取解冻时间\n     */\n    Host.prototype.getUnfreezeTime = function () {\n        return unfreezeTimeMap.get(this.host);\n    };\n    return Host;\n}());\nexport { Host };\nvar HostPool = /** @class */ (function () {\n    /**\n     * @param  {string[]} initHosts\n     * @description 如果在构造时传入 initHosts，则该 host 池始终使用传入的 initHosts 做为可用的数据\n     */\n    function HostPool(initHosts) {\n        if (initHosts === void 0) { initHosts = []; }\n        this.initHosts = initHosts;\n        /**\n         * @description 缓存的 host 表，以 bucket 和 accessKey 作为 key\n         */\n        this.cachedHostsMap = new Map();\n    }\n    /**\n     * @param  {string} accessKey\n     * @param  {string} bucketName\n     * @param  {string[]} hosts\n     * @param  {InternalConfig['upprotocol']} protocol\n     * @returns  {void}\n     * @description 注册可用 host\n     */\n    HostPool.prototype.register = function (accessKey, bucketName, hosts, protocol) {\n        this.cachedHostsMap.set(accessKey + \"@\" + bucketName, hosts.map(function (host) { return new Host(host, protocol); }));\n    };\n    /**\n     * @param  {string} accessKey\n     * @param  {string} bucketName\n     * @param  {InternalConfig['upprotocol']} protocol\n     * @returns  {Promise<void>}\n     * @description 刷新最新的 host 数据，如果用户在构造时该类时传入了 host 或者已经存在缓存则不会发起请求\n     */\n    HostPool.prototype.refresh = function (accessKey, bucketName, protocol) {\n        var _a, _b, _c, _d;\n        return __awaiter(this, void 0, void 0, function () {\n            var cachedHostList, response, stashHosts;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        cachedHostList = this.cachedHostsMap.get(accessKey + \"@\" + bucketName) || [];\n                        if (cachedHostList.length > 0)\n                            return [2 /*return*/];\n                        if (this.initHosts.length > 0) {\n                            this.register(accessKey, bucketName, this.initHosts, protocol);\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, getUpHosts(accessKey, bucketName, protocol)];\n                    case 1:\n                        response = _e.sent();\n                        if ((response === null || response === void 0 ? void 0 : response.data) != null) {\n                            stashHosts = __spread((((_b = (_a = response.data.up) === null || _a === void 0 ? void 0 : _a.acc) === null || _b === void 0 ? void 0 : _b.main) || []), (((_d = (_c = response.data.up) === null || _c === void 0 ? void 0 : _c.acc) === null || _d === void 0 ? void 0 : _d.backup) || []));\n                            this.register(accessKey, bucketName, stashHosts, protocol);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * @param  {string} accessKey\n     * @param  {string} bucketName\n     * @param  {InternalConfig['upprotocol']} protocol\n     * @returns  {Promise<Host | null>}\n     * @description 获取一个可用的上传 Host，排除已冻结的\n     */\n    HostPool.prototype.getUp = function (accessKey, bucketName, protocol) {\n        return __awaiter(this, void 0, void 0, function () {\n            var cachedHostList, availableHostList, priorityQueue;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.refresh(accessKey, bucketName, protocol)];\n                    case 1:\n                        _a.sent();\n                        cachedHostList = this.cachedHostsMap.get(accessKey + \"@\" + bucketName) || [];\n                        if (cachedHostList.length === 0)\n                            return [2 /*return*/, null];\n                        availableHostList = cachedHostList.filter(function (host) { return !host.isFrozen(); });\n                        if (availableHostList.length > 0)\n                            return [2 /*return*/, availableHostList[0]\n                                // 无可用的，去取离解冻最近的 host\n                            ];\n                        priorityQueue = cachedHostList\n                            .slice().sort(function (hostA, hostB) { return (hostA.getUnfreezeTime() || 0) - (hostB.getUnfreezeTime() || 0); });\n                        return [2 /*return*/, priorityQueue[0]];\n                }\n            });\n        });\n    };\n    return HostPool;\n}());\nexport { HostPool };\n//# sourceMappingURL=hosts.js.map","import Resume from './resume';\nimport Direct from './direct';\nimport Logger from '../logger';\nimport { Observable, MB, normalizeUploadConfig } from '../utils';\nimport { HostPool } from './hosts';\nexport * from './base';\nexport * from './resume';\nexport function createUploadManager(options, handlers, hostPool, logger) {\n    if (options.config && options.config.forceDirect) {\n        logger.info('ues forceDirect mode.');\n        return new Direct(options, handlers, hostPool, logger);\n    }\n    if (options.file.size > 4 * MB) {\n        logger.info('file size over 4M, use Resume.');\n        return new Resume(options, handlers, hostPool, logger);\n    }\n    logger.info('file size less or equal than 4M, use Direct.');\n    return new Direct(options, handlers, hostPool, logger);\n}\n/**\n * @param file 上传文件\n * @param key 目标文件名\n * @param token 上传凭证\n * @param putExtra 上传文件的相关资源信息配置\n * @param config 上传任务的配置\n * @returns 返回用于上传任务的可观察对象\n */\nexport default function upload(file, key, token, putExtra, config) {\n    // 为每个任务创建单独的 Logger\n    var logger = new Logger(token, config === null || config === void 0 ? void 0 : config.disableStatisticsReport, config === null || config === void 0 ? void 0 : config.debugLogLevel, file.name);\n    var options = {\n        file: file,\n        key: key,\n        token: token,\n        putExtra: putExtra,\n        config: normalizeUploadConfig(config, logger)\n    };\n    // 创建 host 池\n    var hostPool = new HostPool(options.config.uphost);\n    return new Observable(function (observer) {\n        var manager = createUploadManager(options, {\n            onData: function (data) { return observer.next(data); },\n            onError: function (err) { return observer.error(err); },\n            onComplete: function (res) { return observer.complete(res); }\n        }, hostPool, logger);\n        manager.putFile();\n        return manager.stop.bind(manager);\n    });\n}\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nimport { regionUphostMap } from '../config';\nimport { DEFAULT_CHUNK_SIZE } from '../upload';\nexport function normalizeUploadConfig(config, logger) {\n    var _a = __assign({}, config), upprotocol = _a.upprotocol, uphost = _a.uphost, otherConfig = __rest(_a, [\"upprotocol\", \"uphost\"]);\n    var normalizeConfig = __assign({ uphost: [], retryCount: 3, checkByMD5: false, forceDirect: false, useCdnDomain: true, checkByServer: false, concurrentRequestLimit: 3, chunkSize: DEFAULT_CHUNK_SIZE, upprotocol: 'https', debugLogLevel: 'OFF', disableStatisticsReport: false }, otherConfig);\n    // 兼容原来的 http: https: 的写法\n    if (upprotocol) {\n        normalizeConfig.upprotocol = upprotocol\n            .replace(/:$/, '');\n    }\n    var hostList = [];\n    if (logger && (config === null || config === void 0 ? void 0 : config.uphost) != null && (config === null || config === void 0 ? void 0 : config.region) != null) {\n        logger.warn('do not use both the uphost and region config.');\n    }\n    // 如果同时指定了 uphost 参数，添加到可用 host 列表\n    if (uphost) {\n        if (Array.isArray(uphost)) {\n            hostList.push.apply(hostList, __spread(uphost));\n        }\n        else {\n            hostList.push(uphost);\n        }\n        // 否则如果用户传了 region，添加指定 region 的 host 到可用 host 列表\n    }\n    else if (normalizeConfig === null || normalizeConfig === void 0 ? void 0 : normalizeConfig.region) {\n        var hostMap = regionUphostMap[normalizeConfig === null || normalizeConfig === void 0 ? void 0 : normalizeConfig.region];\n        if (normalizeConfig.useCdnDomain) {\n            hostList.push.apply(hostList, __spread(hostMap.cdnUphost));\n        }\n        else {\n            hostList.push.apply(hostList, __spread(hostMap.srcUphost));\n        }\n    }\n    return __assign(__assign({}, normalizeConfig), { uphost: hostList.filter(Boolean) });\n}\n//# sourceMappingURL=config.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { QiniuErrorName, QiniuError } from '../errors';\nimport { createObjectURL } from './helper';\nvar mimeTypes = {\n    PNG: 'image/png',\n    JPEG: 'image/jpeg',\n    WEBP: 'image/webp',\n    BMP: 'image/bmp'\n};\nvar maxSteps = 4;\nvar scaleFactor = Math.log(2);\nvar supportMimeTypes = Object.keys(mimeTypes).map(function (type) { return mimeTypes[type]; });\nvar defaultType = mimeTypes.JPEG;\nfunction isSupportedType(type) {\n    return supportMimeTypes.includes(type);\n}\nvar Compress = /** @class */ (function () {\n    function Compress(file, config) {\n        this.file = file;\n        this.config = config;\n        this.config = __assign({ quality: 0.92, noCompressIfLarger: false }, this.config);\n    }\n    Compress.prototype.process = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var srcDimension, originImage, canvas, scale, scaleCanvas, distBlob;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.outputType = this.file.type;\n                        srcDimension = {};\n                        if (!isSupportedType(this.file.type)) {\n                            throw new QiniuError(QiniuErrorName.UnsupportedFileType, \"unsupported file type: \" + this.file.type);\n                        }\n                        return [4 /*yield*/, this.getOriginImage()];\n                    case 1:\n                        originImage = _a.sent();\n                        return [4 /*yield*/, this.getCanvas(originImage)];\n                    case 2:\n                        canvas = _a.sent();\n                        scale = 1;\n                        if (this.config.maxWidth) {\n                            scale = Math.min(1, this.config.maxWidth / canvas.width);\n                        }\n                        if (this.config.maxHeight) {\n                            scale = Math.min(1, scale, this.config.maxHeight / canvas.height);\n                        }\n                        srcDimension.width = canvas.width;\n                        srcDimension.height = canvas.height;\n                        return [4 /*yield*/, this.doScale(canvas, scale)];\n                    case 3:\n                        scaleCanvas = _a.sent();\n                        distBlob = this.toBlob(scaleCanvas);\n                        if (distBlob.size > this.file.size && this.config.noCompressIfLarger) {\n                            return [2 /*return*/, {\n                                    dist: this.file,\n                                    width: srcDimension.width,\n                                    height: srcDimension.height\n                                }];\n                        }\n                        return [2 /*return*/, {\n                                dist: distBlob,\n                                width: scaleCanvas.width,\n                                height: scaleCanvas.height\n                            }];\n                }\n            });\n        });\n    };\n    Compress.prototype.clear = function (ctx, width, height) {\n        // jpeg 没有 alpha 通道，透明区间会被填充成黑色，这里把透明区间填充为白色\n        if (this.outputType === defaultType) {\n            ctx.fillStyle = '#fff';\n            ctx.fillRect(0, 0, width, height);\n        }\n        else {\n            ctx.clearRect(0, 0, width, height);\n        }\n    };\n    /** 通过 file 初始化 image 对象 */\n    Compress.prototype.getOriginImage = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var url = createObjectURL(_this.file);\n            var img = new Image();\n            img.onload = function () {\n                resolve(img);\n            };\n            img.onerror = function () {\n                reject('image load error');\n            };\n            img.src = url;\n        });\n    };\n    Compress.prototype.getCanvas = function (img) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var canvas = document.createElement('canvas');\n            var context = canvas.getContext('2d');\n            if (!context) {\n                reject(new QiniuError(QiniuErrorName.GetCanvasContextFailed, 'context is null'));\n                return;\n            }\n            var width = img.width, height = img.height;\n            canvas.height = height;\n            canvas.width = width;\n            _this.clear(context, width, height);\n            context.drawImage(img, 0, 0);\n            resolve(canvas);\n        });\n    };\n    Compress.prototype.doScale = function (source, scale) {\n        return __awaiter(this, void 0, void 0, function () {\n            var sctx, steps, factor, mirror, mctx, width, height, originWidth, originHeight, src, context, i, dw, dh, canvas, data;\n            return __generator(this, function (_a) {\n                if (scale === 1) {\n                    return [2 /*return*/, source];\n                }\n                sctx = source.getContext('2d');\n                steps = Math.min(maxSteps, Math.ceil((1 / scale) / scaleFactor));\n                factor = Math.pow(scale, (1 / steps));\n                mirror = document.createElement('canvas');\n                mctx = mirror.getContext('2d');\n                width = source.width, height = source.height;\n                originWidth = width;\n                originHeight = height;\n                mirror.width = width;\n                mirror.height = height;\n                if (!mctx || !sctx) {\n                    throw new QiniuError(QiniuErrorName.GetCanvasContextFailed, \"mctx or sctx can't be null\");\n                }\n                for (i = 0; i < steps; i++) {\n                    dw = width * factor | 0 // eslint-disable-line no-bitwise\n                    ;\n                    dh = height * factor | 0 // eslint-disable-line no-bitwise\n                    ;\n                    // 到最后一步的时候 dw, dh 用目标缩放尺寸，否则会出现最后尺寸偏小的情况\n                    if (i === steps - 1) {\n                        dw = originWidth * scale;\n                        dh = originHeight * scale;\n                    }\n                    if (i % 2 === 0) {\n                        src = source;\n                        context = mctx;\n                    }\n                    else {\n                        src = mirror;\n                        context = sctx;\n                    }\n                    // 每次画前都清空，避免图像重叠\n                    this.clear(context, width, height);\n                    context.drawImage(src, 0, 0, width, height, 0, 0, dw, dh);\n                    width = dw;\n                    height = dh;\n                }\n                canvas = src === source ? mirror : source;\n                data = context.getImageData(0, 0, width, height);\n                // resize\n                canvas.width = width;\n                canvas.height = height;\n                // store image data\n                context.putImageData(data, 0, 0);\n                return [2 /*return*/, canvas];\n            });\n        });\n    };\n    /** 这里把 base64 字符串转为 blob 对象 */\n    Compress.prototype.toBlob = function (result) {\n        var dataURL = result.toDataURL(this.outputType, this.config.quality);\n        var buffer = atob(dataURL.split(',')[1]).split('').map(function (char) { return char.charCodeAt(0); });\n        var blob = new Blob([new Uint8Array(buffer)], { type: this.outputType });\n        return blob;\n    };\n    return Compress;\n}());\nvar compressImage = function (file, options) { return new Compress(file, options).process(); };\nexport default compressImage;\n//# sourceMappingURL=compress.js.map","import { render } from \"./uploadImg.vue?vue&type=template&id=3d8e8f7a&scoped=true\"\nimport script from \"./uploadImg.vue?vue&type=script&lang=js\"\nexport * from \"./uploadImg.vue?vue&type=script&lang=js\"\n\nimport \"./uploadImg.vue?vue&type=style&index=0&id=3d8e8f7a&scoped=scoped&lang=scss\"\n\nimport exportComponent from \"E:\\\\网页设计\\\\ultra\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3d8e8f7a\"]])\n\nexport default __exports__","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./PicCircle.vue?vue&type=style&index=0&id=54d15ad2&scoped=scoped&lang=scss\"","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n"],"sourceRoot":""}